services:  
  webserver:       
    build:
      context: .
      dockerfile: Dockerfile
    restart: always      
    environment:
      SQLITE_DATABASE: /var/www/html/data/database/poznote.db
      POZNOTE_PASSWORD: ${POZNOTE_PASSWORD:-admin}
      POZNOTE_PASSWORD_USER: ${POZNOTE_PASSWORD_USER:-user}
      HTTP_WEB_PORT: ${HTTP_WEB_PORT}
      POZNOTE_OIDC_ENABLED: ${POZNOTE_OIDC_ENABLED:-false}
      POZNOTE_OIDC_PROVIDER_NAME: ${POZNOTE_OIDC_PROVIDER_NAME:-SSO}
      POZNOTE_OIDC_ISSUER: ${POZNOTE_OIDC_ISSUER:-}
      POZNOTE_OIDC_DISCOVERY_URL: ${POZNOTE_OIDC_DISCOVERY_URL:-}
      POZNOTE_OIDC_CLIENT_ID: ${POZNOTE_OIDC_CLIENT_ID:-}
      POZNOTE_OIDC_CLIENT_SECRET: ${POZNOTE_OIDC_CLIENT_SECRET:-}
      POZNOTE_OIDC_SCOPES: ${POZNOTE_OIDC_SCOPES:-openid profile email}
      POZNOTE_OIDC_REDIRECT_URI: ${POZNOTE_OIDC_REDIRECT_URI:-}
      POZNOTE_OIDC_END_SESSION_ENDPOINT: ${POZNOTE_OIDC_END_SESSION_ENDPOINT:-}
      POZNOTE_OIDC_POST_LOGOUT_REDIRECT_URI: ${POZNOTE_OIDC_POST_LOGOUT_REDIRECT_URI:-}
      POZNOTE_OIDC_DISABLE_NORMAL_LOGIN: ${POZNOTE_OIDC_DISABLE_NORMAL_LOGIN:-false}
      POZNOTE_OIDC_DISABLE_BASIC_AUTH: ${POZNOTE_OIDC_DISABLE_BASIC_AUTH:-false}
      POZNOTE_OIDC_ALLOWED_USERS: ${POZNOTE_OIDC_ALLOWED_USERS:-}
      POZNOTE_DISABLE_SETTINGS_ACCESS: ${POZNOTE_DISABLE_SETTINGS_ACCESS:-false}
      POZNOTE_SETTINGS_PASSWORD: ${POZNOTE_SETTINGS_PASSWORD:-}
      POZNOTE_IMPORT_MAX_INDIVIDUAL_FILES: ${POZNOTE_IMPORT_MAX_INDIVIDUAL_FILES:-50}
      POZNOTE_IMPORT_MAX_ZIP_FILES: ${POZNOTE_IMPORT_MAX_ZIP_FILES:-300}
      POZNOTE_GITHUB_SYNC_ENABLED: ${POZNOTE_GITHUB_SYNC_ENABLED:-false}
      POZNOTE_GITHUB_TOKEN: ${POZNOTE_GITHUB_TOKEN:-}
      POZNOTE_GITHUB_REPO: ${POZNOTE_GITHUB_REPO:-}
      POZNOTE_GITHUB_BRANCH: ${POZNOTE_GITHUB_BRANCH:-main}
      POZNOTE_GITHUB_SYNC_MODE: ${POZNOTE_GITHUB_SYNC_MODE:-manual}
      POZNOTE_GITHUB_AUTHOR_NAME: ${POZNOTE_GITHUB_AUTHOR_NAME:-Poznote}
      POZNOTE_GITHUB_AUTHOR_EMAIL: ${POZNOTE_GITHUB_AUTHOR_EMAIL:-poznote@localhost}
    ports:
      - "${HTTP_WEB_PORT}:80"
    volumes:
      - "./src:/var/www/html"
      - "./data:/var/www/html/data"
