# Poznote Configuration
# Copy this file to .env and customize the values

# =============================================================================
# AUTHENTICATION BASIC CONFIGURATION
# =============================================================================

# Admin Password (shared by all administrators)
POZNOTE_PASSWORD=admin

# Standard User Password (shared by all standard users)
POZNOTE_PASSWORD_USER=user

# Web Server Configuration
# Port on which Poznote will be accessible
HTTP_WEB_PORT=8040

# =============================================================================
# AUTHENTICATION OIDC CONFIGURATION
# =============================================================================

# OIDC / SSO Authentication (Optional)
# Enable OpenID Connect authentication
# When enabled, users can log in using external identity providers like Auth0, Keycloak, Azure AD, etc.

# Enable or disable OIDC authentication
POZNOTE_OIDC_ENABLED=false

# Display name for the OIDC provider (shown on login button)
POZNOTE_OIDC_PROVIDER_NAME=SSO

# OIDC Provider Configuration
# These values come from your OIDC identity provider (IdP)

# The issuer URL of your OIDC provider (usually ends with /.well-known/openid-configuration)
POZNOTE_OIDC_ISSUER=https://your-identity-provider.com

# Client ID from your OIDC application registration
POZNOTE_OIDC_CLIENT_ID=your_client_id

# Client secret from your OIDC application registration (keep this secure!)
POZNOTE_OIDC_CLIENT_SECRET=your_client_secret

# Optional: claim name that contains user groups
# Most providers use "groups"
POZNOTE_OIDC_GROUPS_CLAIM=groups

# Optional BUT VERY RECOMMENDED: Restrict access to OIDC groups (comma-separated)
# SECURITY: If not set, ALL authenticated users from the identity provider can access the application
# Example: POZNOTE_OIDC_ALLOWED_GROUPS=poznote,admins
POZNOTE_OIDC_ALLOWED_GROUPS=

# Optional: Automatically create user profiles at first successful OIDC login
# Recommended with POZNOTE_OIDC_ALLOWED_GROUPS to avoid manual profile provisioning
POZNOTE_OIDC_AUTO_CREATE_USERS=false

# Optional legacy setting: Restrict access to specific users (comma-separated emails/usernames)
# Deprecated in favor of group-based access control
POZNOTE_OIDC_ALLOWED_USERS=

# Optional: Custom scopes (default: "openid profile email")
# POZNOTE_OIDC_SCOPES="openid profile email"

# Optional: Override auto-discovery URL
# POZNOTE_OIDC_DISCOVERY_URL=https://your-idp.com/.well-known/openid-configuration

# Optional: Custom redirect URI (default: auto-generated)
# POZNOTE_OIDC_REDIRECT_URI=https://your-domain.com/oidc_callback.php

# Optional: Custom logout endpoint for RP-initiated logout
# POZNOTE_OIDC_END_SESSION_ENDPOINT=https://your-idp.com/logout

# Optional: Where to redirect after logout (default: login page)
# POZNOTE_OIDC_POST_LOGOUT_REDIRECT_URI=https://your-domain.com/login.php

# Optional: Disable normal login when OIDC is enabled (force SSO-only login)
# When set to true, the username/password login form will be hidden and only OIDC login is available
# Default: false
POZNOTE_OIDC_DISABLE_NORMAL_LOGIN=false

# Optional: Disable HTTP Basic Auth for API when OIDC is enabled (force OIDC-only authentication)
# When set to true, API requests with HTTP Basic Auth will be rejected (403 Forbidden)
# Default: false
POZNOTE_OIDC_DISABLE_BASIC_AUTH=false

# =============================================================================
# SETTINGS ACCESS CONTROL
# =============================================================================

# Optional: Completely block access to the settings page
# When set to true, the settings page will not be accessible (returns a 403 error page)
# Useful for restricting settings access in managed environments
# Default: false
POZNOTE_DISABLE_SETTINGS_ACCESS=false

# Optional: Protect settings page with a password
# When set, users will need to enter this password to access settings
# Leave empty to disable password protection
# Note: DISABLE_SETTINGS_ACCESS takes precedence over this option
# Default: empty (no password protection)
POZNOTE_SETTINGS_PASSWORD=

# =============================================================================
# IMPORT CONFIGURATION
# =============================================================================

# Maximum number of files allowed for individual file imports
# Default: 50
# This limits the number of .html, .md, txt or .markdown files that can be imported at once
POZNOTE_IMPORT_MAX_INDIVIDUAL_FILES=50

# Maximum number of files allowed in a ZIP archive for import
# Default: 300
# This limits the number of files that can be imported from a single ZIP file
POZNOTE_IMPORT_MAX_ZIP_FILES=300

# =============================================================================
# GIT SYNC CONFIGURATION (GitHub, Forgejo)
# =============================================================================

# Enable or disable Git synchronization feature
# When enabled, notes can be synchronized with a Git repository
# Default: false
POZNOTE_GIT_SYNC_ENABLED=false

# Git Provider
# Supported values: github, forgejo
# Default: github
POZNOTE_GIT_PROVIDER=github

# Git API Base URL (Required for Forgejo, optional for GitHub)
# For GitHub: https://api.github.com
# For Forgejo: http://your-instance.com/api/v1
POZNOTE_GIT_API_BASE=

# Personal Access Token (PAT)
# Required for authentication with Git provider API
# - GitHub: Create at https://github.com/settings/tokens/new?scopes=repo
# - Forgejo: Create in Settings > Applications > Manage Access Tokens
POZNOTE_GIT_TOKEN=your_personal_access_token

# Git repository in format: owner/repository
# Example: username/my-notes or organization/notes-backup
POZNOTE_GIT_REPO=username/my-notes

# Branch to use for synchronization
# Default: main
POZNOTE_GIT_BRANCH=main

# Commit author name (optional, defaults to "Poznote")
POZNOTE_GIT_AUTHOR_NAME=Poznote

# Commit author email (optional, defaults to "poznote@localhost")
POZNOTE_GIT_AUTHOR_EMAIL=poznote@localhost

# Legacy settings (deprecated in favor of POZNOTE_GIT_*)
# POZNOTE_GITHUB_SYNC_ENABLED=false
# POZNOTE_GITHUB_TOKEN=
# POZNOTE_GITHUB_REPO=
# POZNOTE_GITHUB_BRANCH=
# POZNOTE_GITHUB_AUTHOR_NAME=
# POZNOTE_GITHUB_AUTHOR_EMAIL=

# =============================================================================
# MCP SERVER CONFIGURATION (AI Assistant Integration)
# =============================================================================

# The MCP (Model Context Protocol) server enables AI assistants like VS Code Copilot
# to interact with your notes through natural language.

# The MCP server is enabled by default in docker-compose.yml.
# It will start automatically with the main application.

# MCP Server port (default: 8045)
# The MCP endpoint will be available at http://localhost:POZNOTE_MCP_PORT/mcp
POZNOTE_MCP_PORT=8045

# Poznote username for MCP authentication (should match a valid Poznote user)
# Default: admin
POZNOTE_MCP_USERNAME=admin

# User ID for MCP operations (1 = admin profile, 2 = user profile, etc.)
# Default: 1
POZNOTE_MCP_USER_ID=1

# Default workspace for MCP operations
# Default: Poznote
POZNOTE_MCP_WORKSPACE=Poznote

# Enable debug logging for MCP server
# Default: false
POZNOTE_MCP_DEBUG=false
