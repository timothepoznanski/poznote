/**
 * Code Blocks Styles
 * 
 * Styles for code blocks including syntax highlighting, copy button,
 * inline code, and font enforcement for monospace content.
 */

/* CODE BLOCKS */

/* Simplified style for code blocks */
.code-block,
pre.code-block,
.noteentry pre {
    font-family: "Segoe UI Mono", "SF Mono", Monaco, Menlo, Consolas, "Ubuntu Mono", "Liberation Mono", "Courier New", monospace !important;
    background-color: #f8f8f8 !important;
    /* border: 1px solid #e1e1e1; */
    border-radius: 4px;
    padding: 20px 20px;
    margin: 0;
    color: #333;
    white-space: pre-wrap !important;
    word-wrap: break-word !important;
    overflow-wrap: break-word !important;
    overflow-x: auto;
    font-size: var(--note-font-size, 15px) !important;
    /* same font size as note text */
    position: relative;
    max-width: 100%;
}

/* Ensure code blocks have the correct margins even without a wrapper */
.code-block,
pre.code-block,
.noteentry pre {
    margin: 0 !important;
    padding: 30px 30px !important;
    /* border-radius: 6px; */
    background: #F8FAFC !important;
    border: 1px solid #e9ecef;
    overflow-x: auto;
    position: relative;
    width: 100%;
    box-sizing: border-box;
}

/* Copy icon for code blocks */
.code-block-copy-btn,
pre.code-block .code-block-copy-btn,
.noteentry pre .code-block-copy-btn {
    position: absolute;
    top: 8px;
    right: 8px;
    width: 28px;
    height: 28px;
    background: rgba(255, 255, 255, 0.9);
    border: 1px solid #e1e4e8;
    border-radius: 4px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    opacity: 1;
    transition: opacity 0.2s ease, background 0.15s ease, transform 0.1s ease;
    z-index: 10;
    padding: 0;
    font-size: 14px;
    color: #586069;
}

.code-block-copy-btn:hover {
    background: #f0f0f0;
    color: #24292e;
    transform: scale(1.05);
}

.code-block-copy-btn:active {
    transform: scale(0.95);
}

.code-block-copy-btn.copied {
    background: #28a745;
    color: white;
    border-color: #28a745;
}

.code-block-copy-btn svg {
    width: 14px;
    height: 14px;
}

/* Additional specific rule to ensure padding is applied */
.noteentry pre,
pre.code-block,
.code-block {
    padding: 30px !important;
    padding-bottom: 20px !important;
}



/* Code inline */
code {
    font-family: "Segoe UI Mono", "SF Mono", Monaco, Menlo, Consolas, "Ubuntu Mono", "Liberation Mono", "Courier New", monospace !important;
    background-color: #f4f4f4;
    padding: 2px 4px;
    border-radius: 3px;
    color: #333;
}

/* Code inside pre blocks should not have background */
pre code,
.noteentry pre code {
    background-color: transparent !important;
    padding: 0 !important;
    border-radius: 0 !important;
}

/* Force same font for all elements with inline styles in code blocks */
pre span[style],
code span[style],
.noteentry pre span[style],
.noteentry code span[style],
.noteentry pre *[style],
.noteentry code *[style] {
    font-family: "Segoe UI Mono", "SF Mono", Monaco, Menlo, Consolas, "Ubuntu Mono", "Liberation Mono", "Courier New", monospace !important;
}

/* Force same font for all formatting elements in code blocks */
pre b,
pre strong,
pre i,
pre em,
pre u,
pre s,
pre span,
code b,
code strong,
code i,
code em,
code u,
code s,
code span,
.code-block b,
.code-block strong,
.code-block i,
.code-block em,
.code-block u,
.code-block s,
.code-block span,
.noteentry pre b,
.noteentry pre strong,
.noteentry pre i,
.noteentry pre em,
.noteentry pre u,
.noteentry pre s,
.noteentry pre span,
.noteentry code b,
.noteentry code strong,
.noteentry code i,
.noteentry code em,
.noteentry code u,
.noteentry code s,
.noteentry code span,
.noteentry .code-block b,
.noteentry .code-block strong,
.noteentry .code-block i,
.noteentry .code-block em,
.noteentry .code-block u,
.noteentry .code-block s,
.noteentry .code-block span {
    font-family: "Segoe UI Mono", "SF Mono", Monaco, Menlo, Consolas, "Ubuntu Mono", "Liberation Mono", "Courier New", monospace !important;
    font-size: inherit;
    /* inherit font size from parent */
}

/* Préserver le background gris même avec du surlignage dans les blocs de code */
/* Simple and effective solution: background override for highlighted elements */
pre *[style*="background"],
code *[style*="background"],
.code-block *[style*="background"],
.noteentry pre *[style*="background"],
.noteentry code *[style*="background"],
.noteentry .code-block *[style*="background"] {
    background: linear-gradient(rgba(255, 255, 0, 0.4), rgba(255, 255, 0, 0.4)), #f4f4f4 !important;
    font-family: "Segoe UI Mono", "SF Mono", Monaco, Menlo, Consolas, "Ubuntu Mono", "Liberation Mono", "Courier New", monospace !important;
    font-size: inherit;
    /* inherit font size from parent */
}

/* Force la même police pour les éléments avec couleur dans les blocs de code */
pre *[style*="color"],
code *[style*="color"],
.code-block *[style*="color"],
.noteentry pre *[style*="color"],
.noteentry code *[style*="color"],
.noteentry .code-block *[style*="color"] {
    font-family: "Segoe UI Mono", "SF Mono", Monaco, Menlo, Consolas, "Ubuntu Mono", "Liberation Mono", "Courier New", monospace !important;
    font-size: inherit;
    /* inherit font size from parent */
}

/* Style plugin code block and pasted code from editors (monospace font detection) */
.noteentry span[style*='Segoe UI Mono'],
.noteentry div[style*='Segoe UI Mono'],
.noteentry p[style*='Segoe UI Mono'],
.noteentry span[style*='Consolas'],
.noteentry div[style*='Consolas'],
.noteentry p[style*='Consolas'],
.noteentry span[style*='Monaco'],
.noteentry div[style*='Monaco'],
.noteentry p[style*='Monaco'],
.noteentry span[style*='Courier New'],
.noteentry div[style*='Courier New'],
.noteentry p[style*='Courier New'],
.noteentry span[style*='monospace'],
.noteentry div[style*='monospace'],
.noteentry p[style*='monospace'],
.noteentry span[style*='Segoe UI Mono'] *,
.noteentry div[style*='Segoe UI Mono'] *,
.noteentry p[style*='Segoe UI Mono'] *,
.noteentry span[style*='Consolas'] *,
.noteentry div[style*='Consolas'] *,
.noteentry p[style*='Consolas'] *,
.noteentry span[style*='Monaco'] *,
.noteentry div[style*='Monaco'] *,
.noteentry p[style*='Monaco'] *,
.noteentry span[style*='Courier New'] *,
.noteentry div[style*='Courier New'] *,
.noteentry p[style*='Courier New'] *,
.noteentry span[style*='monospace'] *,
.noteentry div[style*='monospace'] *,
.noteentry p[style*='monospace'] *,
.noteentry span[style*='Segoe UI Mono'] b,
.noteentry span[style*='Segoe UI Mono'] strong,
.noteentry div[style*='Segoe UI Mono'] b,
.noteentry div[style*='Segoe UI Mono'] strong,
.noteentry span[style*='Consolas'] b,
.noteentry span[style*='Consolas'] strong,
.noteentry span[style*='Consolas'] i,
.noteentry span[style*='Consolas'] em,
.noteentry span[style*='Consolas'] u,
.noteentry span[style*='Consolas'] s,
.noteentry div[style*='Consolas'] b,
.noteentry div[style*='Consolas'] strong,
.noteentry div[style*='Consolas'] i,
.noteentry div[style*='Consolas'] em,
.noteentry div[style*='Consolas'] u,
.noteentry div[style*='Consolas'] s,
.noteentry span[style*='Monaco'] b,
.noteentry span[style*='Monaco'] strong,
.noteentry div[style*='Monaco'] b,
.noteentry div[style*='Monaco'] strong,
.noteentry span[style*='Courier New'] b,
.noteentry span[style*='Courier New'] strong,
.noteentry div[style*='Courier New'] b,
.noteentry div[style*='Courier New'] strong,
.noteentry span[style*='monospace'] b,
.noteentry span[style*='monospace'] strong,
.noteentry div[style*='monospace'] b,
.noteentry div[style*='monospace'] strong {
    font-family: "Segoe UI Mono", "SF Mono", Monaco, Menlo, Consolas, "Ubuntu Mono", "Liberation Mono", "Courier New", monospace !important;
    font-size: var(--note-font-size, 15px) !important;
    /* same font size as note text */
    font-style: normal !important;
    font-weight: normal !important;
    white-space: pre-wrap !important;
    word-wrap: break-word !important;
    overflow-wrap: break-word !important;
    max-width: 100%;
}

/* ============================================
   Code block NO WRAP mode (horizontal scroll)
   Applied when body has .code-block-no-wrap class
   ============================================ */
body.code-block-no-wrap .code-block,
body.code-block-no-wrap pre.code-block,
body.code-block-no-wrap .noteentry pre {
    white-space: pre !important;
    word-wrap: normal !important;
    overflow-wrap: normal !important;
    overflow-x: auto !important;
}

body.code-block-no-wrap .noteentry pre code,
body.code-block-no-wrap pre.code-block code {
    white-space: pre !important;
    word-wrap: normal !important;
    overflow-wrap: normal !important;
}

body.code-block-no-wrap .noteentry span[style*='Segoe UI Mono'],
body.code-block-no-wrap .noteentry div[style*='Segoe UI Mono'],
body.code-block-no-wrap .noteentry span[style*='Consolas'],
body.code-block-no-wrap .noteentry div[style*='Consolas'],
body.code-block-no-wrap .noteentry span[style*='Monaco'],
body.code-block-no-wrap .noteentry div[style*='Monaco'],
body.code-block-no-wrap .noteentry span[style*='Courier New'],
body.code-block-no-wrap .noteentry div[style*='Courier New'],
body.code-block-no-wrap .noteentry span[style*='monospace'],
body.code-block-no-wrap .noteentry div[style*='monospace'] {
    white-space: pre !important;
    word-wrap: normal !important;
    overflow-wrap: normal !important;
}