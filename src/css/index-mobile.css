/**
 * CSS Mobile Styles for Poznote
 * Contains all mobile-specific styles (max-width: 800px)
 * Extracted from index.css for better organization
 */

/* Responsive helpers: show/hide elements on mobile */
.desktop-only {
    display: block !important;
}

.mobile-only {
    display: none !important;
}

/* Hide mobile elements on desktop */

.mobile-nav-button {
    display: none !important;
}

/* Force folder actions to be visible on mobile regardless of hide_folder_actions setting */

.folder-toggle .folder-actions i {
    opacity: 1 !important;
    pointer-events: auto !important;
}

.folder-toggle:hover .folder-actions i {
    opacity: 1 !important;
    pointer-events: auto !important;
}

/* Prevent folder headers from being highlighted when clicking on notes in mobile */
.folder-header.selected-folder,
.folder-header.selected,
.folder-header:active,
.folder-header:focus {
    background-color: transparent !important;
    border: none !important;
    box-shadow: none !important;
    outline: none !important;
}

/* Force remove any possible folder selection styles */
.folder-toggle.selected,
.folder-toggle:active,
.folder-toggle:focus {
    background-color: transparent !important;
    border: none !important;
    box-shadow: none !important;
    outline: none !important;
}

/* Remove all selection highlights on mobile for notes */
.links_arbo_left.selected-note,
.links_arbo_left:hover,
.links_arbo_left:active,
.links_arbo_left:focus {
    background-color: transparent !important;
    border: none !important;
    box-shadow: none !important;
    outline: none !important;
    -webkit-tap-highlight-color: rgba(0,0,0,0) !important;
    touch-action: manipulation !important;
}

/* Prevent any native mobile touch highlighting */
.links_arbo_left,
.folder-header,
.folder-toggle {
    -webkit-tap-highlight-color: transparent !important;
    -webkit-touch-callout: none !important;
    -webkit-user-select: none !important;
    -moz-user-select: none !important;
    -ms-user-select: none !important;
    user-select: none !important;
    touch-action: manipulation !important;
}

body {
    overflow-x: auto !important;
    overflow-y: hidden !important;
    -ms-overflow-style: none !important;  /* IE and Edge */
    scrollbar-width: none !important;  /* Firefox */
    scroll-behavior: smooth !important;
    display: flex !important;
    flex-direction: row !important;
}

body::-webkit-scrollbar {
    display: none !important;  /* Chrome, Safari and Opera */
}

#left_col {
    width: 100% !important;
    max-width: 100% !important;
    min-width: 100% !important;
    flex-shrink: 0 !important;
    -ms-overflow-style: none !important;  /* IE and Edge */
    scrollbar-width: none !important;  /* Firefox */
    overflow: -moz-scrollbars-none !important;  /* Firefox legacy */
    overflow-y: auto !important;
}

#right_col {
    width: 100% !important;
    min-width: 100% !important;
    flex-shrink: 0 !important;
    overflow-y: auto !important;
}

.resize-handle {
    display: none !important;
}

/* Hide scrollbar on mobile - comprehensive approach */
#left_col::-webkit-scrollbar {
    display: none !important;
    width: 0 !important;
    background: transparent !important;
}

#left_col::-webkit-scrollbar-track {
    display: none !important;
}

#left_col::-webkit-scrollbar-thumb {
    display: none !important;
}

.notecard {
    margin-left: 3% !important;
    margin-right: 2% !important;
}

/* Mobile home button in toolbar */
.mobile-home-btn {
    display: flex !important;
    order: -1 !important; /* Put it first in the toolbar */
}

.emoji-picker {
    width: 95vw;
    max-width: 280px;
    max-height: 50vh;
    padding: 12px;
}

.emoji-grid {
    grid-template-columns: repeat(5, 1fr);
    gap: 8px;
    padding: 5px 2px;
}

.emoji-item {
    font-size: 18px;
    width: 32px;
    height: 32px;
}

.emoji-category {
    padding: 10px 0;
}

/* Hide Excalidraw button on mobile */
.btn-excalidraw {
    display: none !important;
}

/* Hide open in new tab button on mobile (it's in the overflow menu) */
.btn-open-new-tab {
    display: none !important;
}

/* Mobile note toolbar: keep only primary icons + overflow menu */
.note-edit-toolbar .toolbar-btn {
    display: none !important;
}

.note-edit-toolbar .mobile-home-btn,
.note-edit-toolbar .btn-task-order:not(.hide-on-selection),
.note-edit-toolbar .btn-favorite:not(.hide-on-selection),
.note-edit-toolbar .btn-share:not(.hide-on-selection),
.note-edit-toolbar .btn-attachment:not(.hide-on-selection),
.note-edit-toolbar .markdown-view-mode-btn:not(.hide-on-selection),
.note-edit-toolbar .markdown-help-btn:not(.hide-on-selection),
.note-edit-toolbar .mobile-more-btn:not(.hide-on-selection) {
    display: flex !important;
}

/* When text is selected inside a note, show formatting buttons on mobile too */
.note-edit-toolbar .text-format-btn.show-on-selection {
    display: inline-flex !important;
}

/* Mobile toolbar dropdown menu */
.note-edit-toolbar .mobile-toolbar-menu {
    right: 0;
    top: 100%;
    z-index: 2000;
}

.note-edit-toolbar .mobile-toolbar-menu[hidden] {
    display: none !important;
}

/* Ensure dropdown items look like menu buttons */
.note-edit-toolbar .mobile-toolbar-item {
    width: 100%;
    background: transparent;
    border: none;
    text-align: left;
    font-style: normal;
}

/* Slash command menu on mobile */
.slash-command-menu {
    width: min(92vw, 360px);
    max-height: 60vh;
    overflow-y: auto;
}

.slash-command-menu .slash-command-item {
    padding: 12px 14px;
    gap: 12px;
}

.slash-command-menu .slash-command-label {
    font-size: 15px;
}

.slash-command-menu .slash-command-icon {
    font-size: 16px;
}

/* Mobile action separator in slash menu */
.slash-command-separator {
    height: 1px;
    background: #e5e7eb;
    margin: 6px 0;
}

/* Back button in slash submenu (mobile) */
.slash-command-back {
    font-weight: 500;
    background-color: #f9fafb !important;
}

.slash-command-back:hover {
    background-color: #f3f4f6 !important;
}

/* Responsive tables in note view (mobile)
   - Prevent tables from forcing a wider-than-screen layout
   - Keep native table layout (do NOT use display:block on <table>)
   - Make the table fill the available width and let cell contents wrap
*/
.noteentry table,
.markdown-preview table {
    width: 100%;
    max-width: 100%;
    table-layout: fixed;
}

.noteentry table td,
.noteentry table th,
.markdown-preview table td,
.markdown-preview table th {
    min-width: 0 !important;
    overflow-wrap: anywhere;
    word-break: break-word;
}

/* Note tags row - responsive layout */
.note-tags-row {
    flex-wrap: wrap;
}

.editable-tags-container {
    flex-wrap: nowrap !important;
    overflow-x: auto;
    overflow-y: visible;
    max-height: 40px;
    scrollbar-width: none;
    -ms-overflow-style: none;
}

.editable-tags-container::-webkit-scrollbar {
    display: none;
}

.folder-wrapper {
    flex-basis: 100%;
    margin-bottom: 8px;
}

.folder_name {
    margin-right: 0;
}

/* Mobile placeholder for editable content */
div[contentEditable=true][data-ph-mobile]:empty:before {
    content: attr(data-ph-mobile);
}

/* System folder icons sizing */
.system-folder .fa-trash.folder-icon,
.system-folder .fa-tags.folder-icon,
.system-folder .fa-cloud.folder-icon,
.system-folder .fa-star-light.folder-icon,
.system-folder .fa-paperclip.folder-icon,
.system-folder .fa-eye.folder-icon,
.system-folder .fa-cog.folder-icon,
.system-folder .fa-search.folder-icon {
    font-size: 14px !important;
}

