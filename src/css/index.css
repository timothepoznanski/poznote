/* CSS Variables for resizable layout */
:root {
    --left-col-width: 370px;
}

/* Placeholder color for tags input to match note title */
.name_tags input::placeholder {
    color: #bababa;
}
/* Hidden elements */
.hidden {
    display: none;
}

/* Utility: force hidden (used by JS to toggle visibility without inline styles) */
.hidden {
    display: none !important;
}

/* Folder visibility: when not hidden, ensure folder headers and contents use block layout */
.folder-header {
    display: block;
}
.folder-content {
    display: block;
}

/* File upload styling */
.file-input-label {
    display: block;
    width: 160px;
    margin: 0 auto;
    background: #fff;
    border: 1px solid #ccc;
    border-radius: 4px;
    padding: 6px 12px;
    text-align: center;
    cursor: pointer;
    position: relative;
    z-index: 1;
}

.file-input-hidden {
    display: none;
}

.accepted-types {
    font-size: 0.85em;
    color: #888;
    text-align: center;
    margin-top: 4px;
}

.spacer-18 {
    height: 18px;
}

.selected-filename {
    margin: 0 0 18px 0;
    font-size: 0.95em;
    color: #444;
    text-align: center;
    min-height: 1.5em;
}

/* (welcome page styles removed) */

/* Workspace list alignment: use a fixed 4-column grid so action buttons align consistently */
.workspace-list ul {
    list-style: none;
    padding-left: 0;
    margin: 0;
}
.workspace-list ul li {
    display: grid;
    /* Use 3 action columns now that the Select column was removed: name | rename | move | delete */
    /* Fix name column width so action buttons have consistent space */
    grid-template-columns: 220px repeat(3, 140px);
    align-items: center;
    gap: 18px; /* uniform spacing between action columns */
    margin: 14px 0;
    min-height: 56px;
    justify-items: center; /* center items in their grid cells */
}
.workspace-name-item {
    grid-column: 1;
    /* padding-left: 8px; */
    font-size: 1rem;
}
.ws-col { display: flex; align-items: center; }
.ws-col-name { justify-content: flex-start; padding-left: 8px; justify-self: start; }
.ws-col-select { justify-content: center; }
.ws-col-action { justify-content: center; gap: 12px; }
.ws-col-move { justify-content: center; }
.ws-col-delete { justify-content: center; }

/* Note list subline (created date & subheading) */
.note-subline {
    font-size: 0.95em; /* slightly smaller than normal */
    color: #6b7280;
    margin-top: -2px; /* space between title and subline */
    margin-bottom: 18px; /* same space between subline and note content */
    display: none; /* hidden by default */
}
.inline-subheading-input {
    font-size: 0.95em;
    padding: 4px 8px;
    border: 1px solid #d1d5db;
    border-radius: 4px;
    margin-left: 6px;
}
.btn-inline-edit, .btn-inline-save, .btn-inline-cancel {
    background: transparent;
    border: none;
    cursor: pointer;
    color: #6b7280;
    margin-left: 6px;
    font-size: 0.95em;
}
.btn-inline-save, .btn-inline-cancel {
    background: #f3f4f6;
    border-radius: 4px;
    padding: 4px 8px;
    color: #111827;
}
/* Make clickable subheading appear neutral (not blue/underlined) */
.subheading-link {
    color: inherit;
    text-decoration: none;
    cursor: pointer;
}
.note-subline .note-sub-sep { margin: 0 6px; color: #cbd5e1; }

/* When enabled via settings, show the created and/or location pieces */
body.show-note-created .note-subline { display: inline-block; }
body.show-note-subheading .note-subline { display: inline-block; }

/* If only one piece is enabled, ensure spacing is correct */
body:not(.show-note-created) .note-sub-created { display: none; }
body:not(.show-note-subheading) .note-sub-subheading { display: none; }
/* Hide separator when created date is not shown */
body:not(.show-note-created) .note-sub-sep { display: none; }

/* Right-column title spacing adjustments */
.innernote h4 { margin: 0 0 8px 0; }
.innernote h4 .css-title { width: 100%; box-sizing: border-box; }
.workspace-list .action-btn {
    min-width: 140px;
    padding: 10px 16px;
    border-radius: 8px;
    font-size: 1rem;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    transition: transform 0.12s ease, box-shadow 0.12s ease;
    margin: 0; /* ensure uniform spacing controlled by gap on the container */
}
.workspace-list .action-btn:active { transform: translateY(1px); }

/* Disabled / grayed buttons */
.btn[disabled], .btn.disabled {
    background: #e9ecef !important;
    color: #6c757d !important;
    border-color: #ddd !important;
    cursor: not-allowed;
    box-shadow: none !important;
    opacity: 0.95;
}

/* Ensure delete column has consistent spacing */
.ws-col-delete { justify-content: center; }

/* Lock icon for default workspace */
.locked-icon { color: #777; margin-left: 8px; font-size: 0.9rem; }

/* Responsive: stack controls on small screens */
@media (max-width: 600px) {
    .workspace-list ul li {
        grid-template-columns: 1fr;
        grid-auto-rows: auto;
        gap: 8px;
        padding: 10px 6px;
        border-bottom: 1px solid #eee;
    }
    .ws-col { width: 100%; display: flex; align-items: center; gap: 8px; flex-wrap: wrap; }
    .ws-col-name { padding-left: 0; font-size: 1rem; }
    .ws-col-action, .ws-col-move, .ws-col-delete { justify-content: flex-start; }
    .workspace-list .action-btn { min-width: 100px; padding: 8px 10px; font-size: 0.95rem; }
}
.delete-form { margin: 0; }
.delete-form .btn { margin: 0; }
.workspace-list ul li > .ws-col .action-btn { margin: 0; }
.workspace-list .btn-danger { background: #e04b4b; color: #fff; border: none; }
.workspace-list .btn-danger:hover { background: #c43b3b; }
/* Ensure destructive buttons inside modals are visually prominent */
.modal .btn-danger {
    background: #e04b4b;
    color: #fff;
    border: none;
    padding: 8px 12px;
    border-radius: 6px;
}
.modal .btn-danger:hover {
    background: #c43b3b;
}
/* .btn-rename visibility controlled earlier */
.workspace-list .btn-rename {
    display: inline-flex;
    background: #f0ad4e; /* orange */
    color: #111;
    border: none;
}
/* (welcome responsive styles removed) */

@font-face {
    font-family: 'Inter';
    src: url('../webfonts/Inter/static/Inter_24pt-Regular.ttf') format('truetype');
    font-weight: 400;
    font-style: normal;
}

@font-face {
  font-family: 'Inter';
  src: url('../webfonts/Inter/static/Inter_24pt-SemiBold.ttf') format('truetype');
  font-weight: 600;
  font-style: normal;
}

html, body {
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
    color: rgb(55, 53, 47);
}

body {
    height: 100%;
}

/* Supprimer les marges du h4 du titre de la note */
h4 {
    margin: 0 !important;
    padding: 0 !important;
}

form{
    margin:0px; 
    padding:0px;
}

/* LINKS */

a { color: #2E8CFA;  text-decoration: none; }

/* a:link { color: #2E8CFA; }
a:visited { color: #2E8CFA; }
a:hover { color: #2E8CFA; }
a:active { color: #2E8CFA; } */

.note-bottom-space { height: 30px; }

/* TOOLBAR VERTICAL MENU */

.note-edit-toolbar {
    position: relative;
}

/* Color palette popup (desktop) - same appearance as mobile palette */
.color-palette-popup {
    box-shadow: 0 6px 18px rgba(0,0,0,0.12);
    border-radius: 6px;
    background: transparent;
    padding: 6px 8px;
    z-index: 9999;
    opacity: 0;
    transform: translateY(-4px);
    transition: opacity 160ms ease, transform 160ms ease;
}
.color-palette-popup {
    background: #fff;
    border: 1px solid rgba(0,0,0,0.12);
    border-radius: 6px;
    box-shadow: 0 6px 18px rgba(0,0,0,0.12);
    padding: 8px;
    z-index: 9999;
    opacity: 0;
    transform-origin: top center;
    transition: opacity 140ms ease, transform 140ms ease;
}
.color-palette-popup.show {
    opacity: 1;
    transform: translateY(0);
}
.color-palette-popup .color-grid {
    display: flex;
    gap: 8px;
    align-items: center;
}
.color-item {
    border: none;
    background: transparent;
    padding: 6px;
    border-radius: 4px;
    cursor: pointer;
}
.color-item:focus { outline: 2px solid #4d90fe; }
.color-swatch {
    display: inline-block;
    width: 20px;
    height: 20px;
    border-radius: 4px;
}
.color-palette-popup.show { opacity: 1; transform: translateY(0); }
.color-palette-popup .color-grid {
    display: flex; gap: 10px; align-items: center; justify-content: center;
    padding: 8px 12px; background: rgba(255,255,255,0.98); border-radius: 10px;
}
.color-item { width: 28px; height: 16px; border-radius: 4px; border: none; cursor: pointer; padding: 0; display:inline-block; box-sizing: border-box; }
.color-item:focus { outline: 2px solid #007DB8; }
/* baseline removed - simplified palette */

/* caret removed - popup has no arrow */

.toolbar-vertical-menu {
    position: absolute;
    top: 100%;
    right: 0;
    background: white;
    border: 1px solid #ddd;
    border-radius: 8px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    z-index: 1000;
    min-width: 200px;
    padding: 8px 0;
    margin-top: 5px;
}

/* Font size popup (used by toolbar.js -> changeFontSize) */
.font-size-popup {
    position: absolute;
    top: calc(100% + 8px);
    right: 0;
    background: #ffffff;
    border: 1px solid #e6e6e6;
    border-radius: 8px;
    box-shadow: 0 8px 20px rgba(20,20,20,0.12);
    padding: 8px;
    z-index: 1002;
    min-width: 180px;
    max-width: 320px;
    opacity: 0;
    transform: translateY(-6px);
    transition: opacity 0.18s ease, transform 0.18s ease;
    display: flex;
    flex-direction: column;
    gap: 6px;
}
.font-size-popup.show {
    opacity: 1;
    transform: translateY(0);
}
.font-size-popup .font-size-item {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 12px;
    padding: 8px 10px;
    border-radius: 6px;
    cursor: pointer;
    transition: background-color 0.12s ease, color 0.12s ease;
}
.font-size-popup .font-size-item:hover {
    background-color: #f6fbff;
}
.font-size-popup .size-label {
    font-size: 0.95rem;
    color: #333;
}
.font-size-popup .size-preview {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    min-width: 36px;
    min-height: 28px;
    padding: 4px 8px;
    border-radius: 4px;
    border: 1px solid #eee;
    color: #222;
    background: #fafafa;
}
/* Map preview classes to approximate sizes (match JS size map) */
.font-size-popup .size-1 { font-size: 0.75rem; }
.font-size-popup .size-2 { font-size: 0.875rem; }
.font-size-popup .size-3 { font-size: 1rem; }
.font-size-popup .size-4 { font-size: 1.125rem; }
.font-size-popup .size-5 { font-size: 1.5rem; }
.font-size-popup .size-6 { font-size: 2rem; }
.font-size-popup .size-7 { font-size: 3rem; line-height: 1; padding: 2px 6px; }

/* Ensure popup does not overflow toolbar area on small screens */
@media (max-width: 720px) {
    .font-size-popup {
        right: 0;
        left: 8px;
        min-width: 150px;
    }
}

.btn-settings {
    position: relative;
}

.btn-settings.active {
    background: rgba(0, 125, 184, 0.1) !important;
    color: #007DB8 !important;
}

/* Attachment indicators (use app blue instead of green) */
.btn-settings.has-attachments {
    color: #007DB8 !important;
}

.btn-settings.has-attachments:hover {
    color: #005a8a !important;
}

.btn-attachment.has-attachments i::before {
    /* adjust icon tint to match the blue color */
    filter: none !important;
    color: #007DB8 !important;
}

.btn-attachment.has-attachments:hover i::before {
    filter: none !important;
    color: #005a8a !important;
}

.dropdown-item.has-attachments i {
    color: #007DB8 !important;
}

/* LEFT COLUMN */


body {
    display: flex;
    flex-direction: row;
    height: 100vh;
    margin: 0;
    min-width: 0;
    min-height: 0;
}

.main-container {
    display: flex;
    width: 100%;
    height: 100vh;
}

#left_col {
    width: var(--left-col-width);
    min-width: 200px;
    max-width: 800px;
    height: 100vh;
    overflow-y: scroll;
    overflow-x: hidden;
    padding: 6 16 16 16;
    box-sizing: border-box;
    background: #FFFFFF;
    flex-shrink: 0;
}

/* Sidebar header and primary action */
.sidebar-header {
    /* padding: 6px 0 14px 0; */
    margin-bottom: 6px;
}
.sidebar-title-row {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 8px;
    padding: 6px 2px;
    position: relative; /* anchor dropdown menus inside the title row */
}
.sidebar-title {
    font-size: 1.25rem;
    font-weight: 700;
    color: #1f2937; /* dark */
}
.workspace-title-icon {
    margin-right: 8px;
    width: 20px;
    height: 20px;
    vertical-align: middle;
    pointer-events: none;
}
.workspace-title-text { vertical-align: middle; }
.sidebar-title[role="button"] { cursor: pointer; }
.sidebar-title-actions { display: flex; align-items: center; gap: 6px; position: relative; }
.sidebar-gear { display: none; }
.sidebar-plus { background: transparent; border: none; color: #007DB8; font-size: 1.05rem; cursor: pointer; padding: 6px; border-radius: 6px; }
.sidebar-plus:hover { background: rgba(0,0,0,0.04); color: #005a8a; }

/* Align new note/folder rows with the search bar */
.sidebar-newnote-row { padding: 6px 0 8px 0; }
.sidebar-newfolder-row { padding: 6px 0 8px 0; }

.btn-new-note {
    display: inline-flex;
    align-items: center;
    gap: 10px;
    background: #0b78e6; /* flat primary */
    color: #fff;
    border: none;
    padding: 0 14px;
    border-radius: 8px;
    font-weight: 600;
    cursor: pointer;
    width: 100%;
    justify-content: center;
    font-size: 0.98rem;
    height: 40px; /* enforce same height as search */
}
.btn-new-note i { font-size: 16px; color: #fff; width:20px; height:20px; display:inline-flex; align-items:center; justify-content:center; }
.btn-new-note.mobile { padding: 10px; font-size: 0.95rem; }
.btn-new-note:hover { filter: brightness(0.96); }

.btn-new-folder {
    display: inline-flex;
    align-items: center;
    gap: 10px;
    background: #f7fafc; /* subtle light */
    color: #0b4da6;
    border: 1px solid #e6eef8;
    padding: 0 12px;
    border-radius: 8px;
    width: 100%;
    justify-content: center;
    cursor: pointer;
    font-weight: 600;
    font-size: 0.98rem;
    height: 40px; /* enforce same height as search */
}
.btn-new-folder i { color: #0b4da6; font-size: 16px; width:20px; height:20px; display:inline-flex; align-items:center; justify-content:center; }
.btn-new-folder:hover { background: #f3f7fb; }

/* Make search bar full width of sidebar and align spacing with buttons */
.searchbar-row { margin-bottom: 8px; max-width: 100%; }
.searchbar-input-wrapper { width: 100%; }

/* Make the unified search placeholder French when shown in left column */

/* Folder header adjustments to match visual spacing */
.folder-header {
    /* margin-top: 6px; */
    /* padding: 6px 4px; */
    border-radius: 8px;
}
.folder-toggle { display:flex; align-items:center; gap:2px; cursor: pointer; }
.folder-name { font-weight:600; color:#111827; }
.folder-note-count { color:#6b7280; margin-left:6px; font-weight:400; }
.hide-folder-counts .folder-note-count { display: none; }

/* Folder content / notes styling */
.note-in-folder { padding-left: 26px; display:block; }
.links_arbo_left { padding: 8px 10px; margin: 4px 0; }
.links_arbo_left .note-title { font-weight: 500; color: #1f2937; }

/* Selected note style matching light blue band from screenshot */
.links_arbo_left.selected-note {
    background-color: transparent; /* remove blue background */
    /* keep layout consistent but remove rounded background */
    border-radius: 0;
    color: #0b4da6;
}
.links_arbo_left.selected-note .note-title { color: #0b4da6; font-weight:600; }

/* Folder actions icons keep small size */
.folder-actions i { margin-left: 8px; color:#6b7280; cursor:pointer; }
.folder-actions i:hover { color:#374151; }


.resize-handle {
    width: 3px;
    height: 100vh;
    background: #FFFFFF;
    cursor: col-resize;
    position: relative;
    flex-shrink: 0;
    /* subtle divider line to match the mockup */
    border-right: 1px solid #ccc;

}

/* Separator after Favorites to visually separate important folders */
.favorites-separator {
    height: 8px;
    border-bottom: 1px solid #ccc; /* match left column right border */
    margin: 8px 6px;
}

/* Sidebar footer: CTA buttons pinned at bottom of left column */
.sidebar-footer {
    position: sticky;
    bottom: 16px;
    width: 100%;
    padding: 8px 0 0 0;
    box-sizing: border-box;
}
.sidebar-footer-inner {
    display: flex;
    gap: 8px;
    flex-direction: column; /* stack buttons vertically */
}
.sidebar-footer .btn-new-note, .sidebar-footer .btn-new-folder {
    display: none; /* deprecated: use unified create button */
}

/* Unified create button */
.create-dropdown {
    position: relative;
    width: 100%;
}
.btn-create {
    width: 100%;
    height: 40px;
    border-radius: 8px;
    background: #007DB8;
    color: #fff;
    border: none;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    font-size: 1rem;
    padding: 8px 12px;
    box-sizing: border-box;
    cursor: pointer;
}
.btn-create:focus { outline: none; box-shadow: 0 0 0 3px rgba(0,123,184,0.12); }
.create-caret { margin-left: 6px; font-size: 0.9rem; }
.create-menu {
    position: absolute;
    top: 100%;
    right: 0;
    background: #fff;
    border: 1px solid #e6eef8;
    box-shadow: 0 8px 24px rgba(15,120,230,0.08);
    border-radius: 8px;
    padding: 8px;
    display: flex;
    flex-direction: column;
    gap: 6px;
    z-index: 60;
    min-width: 140px;
}

#header-create-menu {
    position: absolute;
    top: 100%;
    right: 0;
    background: white;
    border: 1px solid #ddd;
    border-radius: 8px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    z-index: 1000;
    min-width: 140px;
    padding: 8px 0;
    margin-top: 5px;
    display: none;
}

.create-menu-item {
    display: flex;
    align-items: center;
    padding: 10px 15px;
    cursor: pointer;
    font-size: 14px;
    color: #333;
    border-bottom: 1px solid #f0f0f0;
    transition: background-color 0.2s;
    font-family: 'Inter', sans-serif;
    background: transparent;
    border: none;
    width: 100%;
    text-align: left;
}

.create-menu-item:last-child {
    border-bottom: none;
}

.create-menu-item:hover {
    background-color: #f8f9fa;
    color: #007DB8;
}
.create-menu-item {
    background: transparent;
    border: none;
    padding: 10px 12px;
    text-align: left;
    border-radius: 6px;
    cursor: pointer;
}
.create-menu-item:hover { background: #f6fbff; }

/* LEFT HEADER */

.left-header {
    display: flex;
    align-items: center;
    justify-content: center;
    text-align: center;
    /* padding: 0px 0px 13px 0px; */
    margin-bottom: 16px; /* space between workspace name and icons */
    /* border-bottom: 1px solid #e9ecef; */
}



.left-header-text {
    font-family: 'Inter', sans-serif;
    font-weight: 700;
    font-size: 1.5rem; /* workspace name size */
    color: #007DB8;
    letter-spacing: 0.5px;
}

/* RIGHT COLUMN */

#right_col {
    flex: 1;
    min-width: 400px;
    height: 100vh;
    background-color: #FFFFFF;
    overflow-y: scroll; /* Always show scrollbar */
    overflow-x: hidden; /* Disable horizontal scrolling */
    box-sizing: border-box;
}

/* Header note : contient uniquement la barre d'outils */

.note-header {
    display: flex;
    flex-direction: column;
    align-items: stretch;
    justify-content: flex-start;
    width: 100%;
    /* margin-bottom: 15px; */
    position: sticky;
    top: 0;
    z-index: 10;
    background: #fff;
    padding-top: 10px;
    padding-bottom: 10px;
    padding-left: 10px;
    padding-right: 10px;
    box-sizing: border-box;
    /* border-bottom: 1px solid #ccc; */
    gap: 8px;
}

.note-edit-toolbar {
    display: flex;
    flex-direction: row;
    align-items: center;
    justify-content: center;
    flex-wrap: wrap;
    width: 100%;
    box-sizing: border-box;
    scrollbar-width: none;
    -ms-overflow-style: none;
    max-width: 100%;
    text-align: center;
    position: relative;
    order: 2;
}

/* Color-mode: replace toolbar icons with inline color selectors */
.note-edit-toolbar.color-mode .toolbar-btn { display: none !important; }

.note-edit-toolbar::-webkit-scrollbar {
    display: none;
}

.note-header > #lastupdated {
    font-size: 0.95em;
    color: #888;
}

.toolbar-btn {
    background: transparent !important;
    border: none !important;
    border-radius: 5px;
    padding: 6px 8px;
    font-size: 1.1em;
    cursor: pointer;
    margin: 0 6px;
    transition: color 0.2s;
    color: #007DB8;
    outline: none;
    flex-shrink: 0;
    min-width: 36px;
    min-height: 36px;
    display: flex;
    align-items: center;
    justify-content: center;
    text-align: center;
}

.toolbar-btn i {
    display: block;
    text-align: center;
    line-height: 1;
}
.toolbar-btn:hover, .toolbar-btn:focus {
    background: transparent !important;
    border: none !important;
    color: #005a8a;
}

    /* Boutons de formatage de texte : cachés par défaut, visibles lors de sélection */
    .text-format-btn {
        opacity: 0;
        visibility: hidden;
        position: absolute;
        width: 0;
        padding: 0;
        margin: 0;
        overflow: hidden;
        transition: opacity 0.2s ease, visibility 0.2s ease, position 0s ease 0.2s;
    }
    
    .text-format-btn.show-on-selection {
        opacity: 1;
        visibility: visible;
        position: relative;
        width: auto;
        padding: 6px 8px;
        margin: 0 2px;
        transition: opacity 0.2s ease, visibility 0.2s ease, position 0s ease 0s;
    }
    
    /* Boutons d'actions sur la note : visibles par défaut, cachés lors de sélection */
    .note-action-btn {
        opacity: 1;
        visibility: visible;
        transition: opacity 0.2s ease, visibility 0.2s ease;
        width: auto;
        padding: 6px 8px;
        margin: 0 4px;
    }
    
    /* Ajustement de la toolbar pour les écrans desktop */
    .note-edit-toolbar {
        gap: 2px;
        justify-content: center;
        align-items: center;
        flex-wrap: wrap;
    }
    
    .toolbar-btn {
        margin: 0 6px;
        padding: 6px 8px;
        min-width: 36px;
        min-height: 36px;
        display: flex;
        align-items: center;
        justify-content: center;
        text-align: center;
    }
    
    .note-action-btn.hide-on-selection {
        opacity: 0;
        visibility: hidden;
        position: absolute;
        width: 0;
        padding: 0;
        margin: 0;
        overflow: hidden;
    }

.dropdown-menu {
    position: absolute;
    top: 100%;
    right: 0;
    background: white;
    border: 1px solid #ddd;
    border-radius: 8px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    min-width: 200px;
    z-index: 1000;
    overflow: hidden;
}

.dropdown-item {
    display: flex;
    align-items: center;
    padding: 12px 16px;
    cursor: pointer;
    font-size: 14px;
    color: #333;
    border-bottom: 1px solid #f0f0f0;
    transition: background-color 0.2s;
    font-style: normal;
}

.dropdown-item:last-child {
    border-bottom: none;
}

.dropdown-item:hover {
    background-color: #f8f9fa;
}

.dropdown-item i {
    margin-right: 10px;
    width: 16px;
    text-align: center;
    color: #007DB8;
}

.note-header-spacer {
    width: 100%;
    height: 15px;
    background: #fff;
}

a.links_arbo_left, a.links_arbo_left:link, a.links_arbo_left:visited, a.links_arbo_left:hover, a.links_arbo_left:active {
    display: inline-block;
    width: 100%;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    vertical-align: top;
    text-decoration: none;
    color: rgb(55, 53, 47);
    padding: 3px 6px 3px 0px; /* Réduction du padding vertical (6px → 3px) */
    border-radius: 8px;
    font-size: 14px;
    line-height: 1.2;
    font-weight: normal;
    box-sizing: border-box;
}

/* Specific rule for note title spans in all links */
a.links_arbo_left .note-title {
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    display: block;
}

a.links_arbo_left.selected-note {
    background-color: transparent;
}

/* SEARCHBARS */

.searchbar-row {
    display: flex;
    align-items: center;
    width: 100%;
    position: relative;
}

.searchbar-input-wrapper {
    position: relative;
    width: 100%;
    flex: 1;
}

.searchbar-input {
    padding: 10px 12px 10px 44px;
    border-radius: 8px;
    /* border: 1px solid #d3d6db; */
    background: #f6f7f9;
    font-size: 0.9em;
    transition: border-color 0.18s, box-shadow 0.18s;
    box-shadow: 0 0 0 1px #e6e6e6;
    outline: none;
    width: 100%;
    min-width: 0;
    font-family: 'Inter', sans-serif !important;
    color: #6c7580;
    caret-color: #6c7580;
    height: 40px;
    box-sizing: border-box;
}

.searchbar-input:disabled {
    background-color: #f5f5f5;
    color: #999;
    cursor: not-allowed;
}

.searchbar-input::placeholder {
    color: #6c7580;
    opacity: 1;
    font-size: 1em;
}

.searchbar-input:focus {
    border-color: #b0b3b8;
    /* box-shadow: 0 0 0 2px #d3d6db; */
    outline: none;
}

.searchbar-icon-row {
    position: relative;
    flex: 1;
    display: flex;
    align-items: center;
}

.searchbar-icon {
    position: absolute;
    left: 16px;
    top: 50%;
    transform: translateY(-50%);
    color: #6c7580;
    font-size: 1.2em;
    pointer-events: none;
}

/* Icon box for search inside left column */

.searchbar-icon {
    position: absolute;
    left: 12px;
    top: 50%;
    transform: translateY(-50%);
    z-index: 2;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    color: #6b7280;
    font-size: 16px;
    width: 20px;
    height: 20px;
}

.searchbar-icon {
    position: absolute;
    left: 14px;
    right: auto;
    top: 50%;
    transform: translateY(-50%);
    color: #9aa3a8;
    /* allow clicks on the icon so JS listeners can attach */
    pointer-events: auto;
    z-index: 2;
    font-size: 1.05em;
    cursor: pointer;
    display: inline-flex;
    align-items: center;
    justify-content: center;
}

/* Ensure the actual FontAwesome icon inside the searchbar has a consistent size
   different fa-* glyphs can appear visually different; normalize to 1em */
.searchbar-icon i,
.searchbar-icon .fas,
.searchbar-icon .far,
.searchbar-icon .fab,
.searchbar-icon .fa {
    font-size: 0.9em; /* slightly smaller icons */
    line-height: 1;
    display: inline-block;
}

/* Highlight a tag when it matches an active tag search */
.tag-highlight {
    background: #fff3b0; /* soft yellow */
    padding: 2px 6px;
    border-radius: 6px;
    box-shadow: inset 0 -1px 0 rgba(0,0,0,0.03);
    color: #2b2b2b;
}

.searchbar-desktop {
    margin-top: 12px;
    margin-bottom: 15px;
    padding: 0;
    background: none;
    border-radius: 0;
    box-shadow: none;
}

.searchbar-row {
    display: flex;
    align-items: center;
    gap: 0;
    position: relative;
    width: 100%;
    margin: 0 0 8px 0;
}

/* Folder filter clear buttons (hidden by default) */
#folder-filter-clear-mobile,
#folder-filter-clear-desktop {
    display: none;
}

.searchbar-clear {
    position: absolute;
    right: 15px;
    top: 50%;
    transform: translateY(-50%);
    background: none !important;
    border: none;
    outline: none;
    cursor: pointer;
    padding: 0 4px;
    z-index: 3;
    display: flex;
    align-items: center;
    justify-content: center;
    height: 36px;
    width: 36px;
    border-radius: 50%;
    transition: background 0.2s, color 0.2s;
}

.searchbar-clear .clear-icon {
    color: #d32f2f;
    font-size: 16px;
    font-weight: bold;
    line-height: 1;
}

.contains_forms_search
{
    width: 100%;
    margin: 12px 0 15px 0;
    text-align: center;
    box-sizing: border-box;
    /* display: flex; */
    /* justify-content: center; */
}

img {
    max-width:100%; /* To prevent screenshots from exceeding their container when they are too large */
}

.notification-overlay {
    display: none;
    position: fixed;
    z-index: 999;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.8);
}

#notificationPopup {
    display: none;
    position: fixed;
    left: 50%;
    top: 50%;
    transform: translate(-50%, -50%);
    padding: 16px 24px;
    color: #007DB8;
    background-color: #fff;
    border: 2px solid #007DB8;
    z-index: 1000;
    font-size: 1em;
    text-align: center;
    border-radius: 8px;
    box-shadow: 0 4px 16px rgba(0, 125, 184, 0.2);
    max-width: 400px;
    min-width: 200px;
}

/* Image menu styles (similar to settings menu) */











/* Image menu styles (similar to settings menu) */
.image-menu {
    position: absolute;
    background: white;
    border: 1px solid #ddd;
    border-radius: 8px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    z-index: 1000;
    min-width: 160px;
    padding: 8px 0;
    display: block;
}

.image-menu-item {
    display: flex;
    align-items: center;
    padding: 10px 15px;
    cursor: pointer;
    font-size: 14px;
    color: #333;
    border-bottom: 1px solid #f0f0f0;
    transition: background-color 0.2s;
    font-family: 'Inter', sans-serif;
}

.image-menu-item:last-child {
    border-bottom: none;
}

.image-menu-item:hover {
    background-color: #f8f9fa;
    color: #007DB8;
}

.image-menu-item i {
    margin-right: 10px;
    width: 16px;
    text-align: center;
    color: #007DB8;
}

/* Mobile responsiveness for image modals */
@media (max-width: 768px) {
    
    
    
    
    .image-preview-content {
        max-width: 98%;
        max-height: 98%;
    }
    
    .image-preview-close {
        top: -40px;
        font-size: 32px;
    }
}

/* UPDATE NOTIFICATION STYLES */

.settings-menu-item {
    position: relative;
}

/* Update status styling */
#update-status, #update-status-mobile {
    display: block;
    margin-top: 2px;
    font-size: 0.75em;
    line-height: 1.2;
}

/* Keyframe animations */
@keyframes slideInRight {
    from {
        right: -400px;
        opacity: 0;
    }
    to {
        right: 20px;
        opacity: 1;
    }
}

@keyframes slideOutRight {
    from {
        right: 20px;
        opacity: 1;
    }
    to {
        right: -400px;
        opacity: 0;
    }
}

/* MENU RIGHT */

.icon_download{
    color: #007DB8;
    font-size: 17px;
}

.note-icons-desktop {
    padding: 4px 11px;
    font-size: 17px;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 25px;
    cursor: pointer;
    margin: 0 0 0 auto;
}

.icon_info{
    color: #007DB8;
    font-size: 1.1em;
}

.icon_save{
    color: #007DB8;
    font-size: 1.1em;
}

.note-tags-row {
    display: flex;
    align-items: center;
    overflow: visible;
    /* margin-bottom: 15px; */
    margin-top: 5px;
}

.fa-tag.icon_tag {
    font-size: 12px;
    margin-right: 8px;
    flex-shrink: 0;
    align-self: center;
    line-height: 1; /* avoid extra vertical spacing */
}

.fa-tag.icon_tag::before {
    background-image: url('../images/tags-light-full.svg') !important;
} 

.name_tags {
    flex: 1;
    min-width: 0;
    overflow: visible;
    color: rgb(55, 53, 47) !important;
}

.name_tags * {
    color: rgb(55, 53, 47) !important;
}

/* Retirer la bordure lors du focus sur l'input des tags */
.name_tags input:focus {
    border: none !important;
    outline: none;
}

.add-margin {
    margin: 8px 5px;
    font-family: 'Inter', sans-serif !important;
    font-size: 15px;
}

/* ATTACHMENTS ROW */

.note-attachments-row {
    display: flex;
    align-items: center;
    margin-bottom: 5px;
    margin-top: 15px;
}

.fa-paperclip.icon_attachment {
    font-size: 12px;
    margin-right: 8px;
    flex-shrink: 0;
    color: #007DB8;
    align-self: center;
    line-height: 1;
}

.note-attachments-list {
    flex: 1;
    min-width: 0;
    line-height: 1.4;
}

.attachment-link {
    color: #007DB8 !important;
    text-decoration: none;
    font-size: 14px;
    transition: color 0.2s;
    cursor: pointer;
    display: inline-block;
    margin: 2px 4px 2px 8px; /* left margin to match tag spacing */
    word-break: break-word;
}

.attachment-link:hover {
    color: #005a8b !important;
    text-decoration: underline;
}

.attachment-link:visited {
    color: #007DB8 !important;
}

/* MENU LEFT */

/* .containbuttons removed (mobile buttons moved to sidebar footer) */

.newbutton[style], .list_tags[style] {
    text-align: center;
}

.newbutton[style] {
    cursor: pointer;
    margin-left: 8px;
}

.newbutton[style] .fa-times-circle {
    color: #d32f2f;
    font-size: 22px;
    display: flex;
    align-items: center;
    justify-content: center;
}

.newbutton, .newfolderbutton, .list_tags, .settingsbutton {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 36px;
    height: 36px;
    cursor: pointer;
    margin: 4px;
    color: #007DB8;
    font-size: 16px;
    border-radius: 4px;
    transition: background-color 0.2s, color 0.2s;
}

.newbutton:hover, .newfolderbutton:hover, .list_tags:hover, .settingsbutton:hover {
    background-color: rgba(0, 125, 184, 0.1);
    color: #005a8a;
}

/* Settings dropdown styles */
.settings-dropdown {
    position: relative;
    display: flex;
    align-items: center;
    justify-content: center;
}

.settingsbutton {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 36px;
    height: 36px;
    cursor: pointer;
    margin: 4px;
    color: #007DB8;
    font-size: 16px;
    border-radius: 4px;
    transition: background-color 0.2s, color 0.2s;
}

.settings-menu {
    position: absolute;
    top: 100%;
    left: 50%;
    transform: translateX(-50%);
    background: white;
    border: 1px solid #ddd;
    border-radius: 8px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    z-index: 1000;
    min-width: 180px;
    padding: 8px 0;
    margin-top: 5px;
    display: none;
}

.settings-menu-item {
    display: flex;
    align-items: center;
    padding: 10px 15px;
    cursor: pointer;
    font-size: 14px;
    color: #333;
    border-bottom: 1px solid #f0f0f0;
    transition: background-color 0.2s;
    font-family: 'Inter', sans-serif;
}

.settings-menu-item:last-child {
    border-bottom: none;
}

.settings-menu-item:hover {
    background-color: #f8f9fa;
    color: #007DB8;
}

.settings-menu-item i {
    margin-right: 10px;
    width: 16px;
    text-align: center;
    color: #007DB8;
}

.settings-menu-item .ai-status {
    margin-left: 8px;
    /* font-size: 0.85em; */
    vertical-align: baseline;
}

.settings-menu-item .ai-status.enabled {
    color: #28a745;
}

.settings-menu-item .ai-status.disabled {
    color: #dc3545;
}

/* AI dropdown styles */
.ai-dropdown {
    position: relative;
    display: inline-block;
}

.ai-menu {
    position: absolute;
    top: 100%;
    left: 50%;
    transform: translateX(-50%);
    background: white;
    border: 1px solid #ddd;
    border-radius: 8px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    z-index: 9999;
    min-width: 160px;
    padding: 8px 0;
    margin-top: 5px;
    display: none;
}

.ai-menu-item {
    display: flex;
    align-items: center;
    padding: 10px 15px;
    cursor: pointer;
    font-size: 14px;
    color: #333;
    border-bottom: 1px solid #f0f0f0;
    transition: background-color 0.2s;
    font-family: 'Inter', sans-serif;
}

.ai-menu-item:last-child {
    border-bottom: none;
}

.ai-menu-item:hover {
    background-color: #f8f9fa;
    color: #007DB8;
}

.ai-menu-item i {
    margin-right: 10px;
    width: 16px;
    text-align: center;
    color: #007DB8;
}

/* Mobile AI dropdown adjustments */
.ai-dropdown.mobile .ai-menu {
    min-width: 140px;
    padding: 6px 0;
}

.ai-dropdown.mobile .ai-menu-item {
    padding: 8px 12px;
    font-size: 13px;
}

.search:focus{
    border-bottom: 1px solid #32a1ce;
}

/* ICONES TRASH pour interface principale */

/* Share / Export dropdown styles (reuse AI menu patterns) */
.share-dropdown {
    position: relative;
    display: inline-block;
}

.share-menu {
    position: absolute;
    top: 100%;
    left: 50%;
    transform: translateX(-50%);
    background: white;
    border: 1px solid #ddd;
    border-radius: 8px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    z-index: 9999;
    min-width: 160px;
    padding: 8px 0;
    margin-top: 5px;
    display: none;
}

.share-menu-item {
    display: flex;
    align-items: center;
    padding: 10px 15px;
    cursor: pointer;
    font-size: 14px;
    color: #333;
    border-bottom: 1px solid #f0f0f0;
    transition: background-color 0.2s;
    font-family: 'Inter', sans-serif;
}

.share-menu-item:last-child { border-bottom: none; }

.share-menu-item:hover { background-color: #f8f9fa; color: #007DB8; }

.share-menu-item i { margin-right: 10px; width: 16px; text-align: center; color: #007DB8; }

.share-dropdown.mobile .share-menu { min-width: 140px; padding: 6px 0; }

/* Mobile: ensure dropdowns aren't clipped by parent containers with overflow:hidden.
   Use fixed positioning for the mobile share menu so it sits above the layout and
   remains visible even when parent elements hide overflow. It will be centered
   horizontally by default and placed slightly above the bottom toolbar. */
@media (max-width: 900px) {
    .share-dropdown.mobile .share-menu {
        position: fixed !important;
        left: 50% !important;
        transform: translateX(-50%) !important;
        bottom: 64px !important; /* above the toolbar */
        top: auto !important;
        margin-top: 0 !important;
        z-index: 20000 !important;
        box-shadow: 0 8px 24px rgba(0,0,0,0.18) !important;
    }
}


.icon_trash {
    color: #007DB8;
}

.trashnotebutton {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 36px;
    height: 36px;
    cursor: pointer;
    margin: 4px;
    color: #007DB8;
    font-size: 16px;
    border-radius: 4px;
    transition: background-color 0.2s, color 0.2s;
}

.trashnotebutton:hover {
    background-color: rgba(0, 125, 184, 0.1);
    color: #005a8a;
}

.logoutbutton {
    display: inline-block;
    width: 30px;
    cursor: pointer;
    height: 20px;
    margin: 5px;
    color: #dc3545;
    font-size: 15px;
}

.logoutbutton:hover {
    color: #c82333;
}

/* NOTE DISPLAY */

div[contentEditable=true]:empty:before {
        content:attr(data-ph);
        color: #bababa;
}

/* Exclure les blocs de code du placeholder automatique */
.code-block:empty:before,
.noteentry .code-block:empty:before {
        content: none !important;
}

.notecard{
    margin-left: 1%;
    margin-right: 1%;
    margin-bottom:20px;
    background: white;
    border-radius: 5px;
    font-family: 'Inter', sans-serif;
}

.innernote{
    padding-left: 2%;
    padding-top: 0px;
    padding-right: 2%;
    padding-bottom: 5px;
    font-family: 'Inter', sans-serif;
    display: flex;
    flex-direction: column;
}

textarea{
    padding: 0;
    padding-top: 30px; 
    width:100%;
    border: 0 none white;
    overflow: hidden;
    outline: none;
    resize: none;
    font-family: 'Inter', sans-serif;
}

textarea:focus{
    border-bottom: 1px;
    outline: 0;
}

.noteentry{
    padding: 0;
    padding-top: 8px; 
    width:100%;
    border: 0 none white;
    overflow-wrap: break-word;
    outline: none;
    resize: none;
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
    font-size: 15px;
}

/* Appliquer Inter sur les éléments textuels, sauf dans les blocs de code */
.noteentry p,
.noteentry div,
.noteentry ul,
.noteentry ol,
.noteentry li,
.noteentry b,
.noteentry strong,
.noteentry i,
.noteentry em,
.noteentry u,
.noteentry s,
.noteentry a,
.noteentry span:not(.code-block span) {
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji' !important;
}

.noteentry:focus{
    border-bottom: 1px;
    outline: 0;
}

/* CODE BLOCKS */

/* Style simplifié pour les blocs de code */
.code-block, 
pre.code-block,
.noteentry pre {
    font-family: "Segoe UI Mono", "SF Mono", Monaco, Menlo, Consolas, "Ubuntu Mono", "Liberation Mono", "Courier New", monospace !important;
    background-color: #f8f8f8 !important;
    /* border: 1px solid #e1e1e1; */
    border-radius: 4px;
    padding: 20px 20px;
    margin: 8px 0;
    color: #333;
    white-space: pre-wrap;
    word-wrap: break-word;
    overflow-x: auto;
    font-size: 14px !important;
    position: relative;
}

/* S'assurer que les blocs de code ont les bonnes marges même sans wrapper */
.code-block, pre.code-block, .noteentry pre {
    margin: 0 !important;
    padding: 30px 30px !important;
    /* border-radius: 6px; */
    background: #F8FAFC !important;
    border: 1px solid #e9ecef;
    overflow-x: auto;
    position: relative;
    width: 100%;
    box-sizing: border-box;
}

/* Règle spécifique supplémentaire pour s'assurer que le padding est appliqué */
.noteentry pre, pre.code-block, .code-block {
    padding: 30px !important;
}



/* Code inline */
code {
    font-family: "Segoe UI Mono", "SF Mono", Monaco, Menlo, Consolas, "Ubuntu Mono", "Liberation Mono", "Courier New", monospace !important;
    background-color: #f4f4f4;
    padding: 2px 4px;
    border-radius: 3px;
    color: #333;
}

/* Force la même police pour tous les éléments avec styles inline dans les blocs de code */
pre span[style],
code span[style],
.noteentry pre span[style],
.noteentry code span[style],
.noteentry pre *[style],
.noteentry code *[style] {
    font-family: "Segoe UI Mono", "SF Mono", Monaco, Menlo, Consolas, "Ubuntu Mono", "Liberation Mono", "Courier New", monospace !important;
}

/* Force la même police pour tous les éléments de formatage dans les blocs de code */
pre b, pre strong, pre i, pre em, pre u, pre s, pre span,
code b, code strong, code i, code em, code u, code s, code span,
.code-block b, .code-block strong, .code-block i, .code-block em, .code-block u, .code-block s, .code-block span,
.noteentry pre b, .noteentry pre strong, .noteentry pre i, .noteentry pre em, .noteentry pre u, .noteentry pre s, .noteentry pre span,
.noteentry code b, .noteentry code strong, .noteentry code i, .noteentry code em, .noteentry code u, .noteentry code s, .noteentry code span,
.noteentry .code-block b, .noteentry .code-block strong, .noteentry .code-block i, .noteentry .code-block em, .noteentry .code-block u, .noteentry .code-block s, .noteentry .code-block span {
    font-family: "Segoe UI Mono", "SF Mono", Monaco, Menlo, Consolas, "Ubuntu Mono", "Liberation Mono", "Courier New", monospace !important;
    font-size: 14px !important;
}

/* Préserver le background gris même avec du surlignage dans les blocs de code */
/* Solution simple et efficace : override du background pour les éléments surlignés */
pre *[style*="background"],
code *[style*="background"],
.code-block *[style*="background"],
.noteentry pre *[style*="background"],
.noteentry code *[style*="background"],
.noteentry .code-block *[style*="background"] {
    background: linear-gradient(rgba(255, 255, 0, 0.4), rgba(255, 255, 0, 0.4)), #f4f4f4 !important;
    font-family: "Segoe UI Mono", "SF Mono", Monaco, Menlo, Consolas, "Ubuntu Mono", "Liberation Mono", "Courier New", monospace !important;
    font-size: 14px !important;
}

/* Force la même police pour les éléments avec couleur dans les blocs de code */
pre *[style*="color"],
code *[style*="color"],
.code-block *[style*="color"],
.noteentry pre *[style*="color"],
.noteentry code *[style*="color"],
.noteentry .code-block *[style*="color"] {
    font-family: "Segoe UI Mono", "SF Mono", Monaco, Menlo, Consolas, "Ubuntu Mono", "Liberation Mono", "Courier New", monospace !important;
    font-size: 14px !important;
}

/* Style plugin code block (optionnel, garder la taille et couleur si besoin) */
.noteentry span[style*='Consolas'],
.noteentry span[style*='Consolas'] *,
.noteentry span[style*='Consolas'] b,
.noteentry span[style*='Consolas'] strong,
.noteentry span[style*='Consolas'] i,
.noteentry span[style*='Consolas'] em,
.noteentry span[style*='Consolas'] u,
.noteentry span[style*='Consolas'] s {
    font-family: "Segoe UI Mono", "SF Mono", Monaco, Menlo, Consolas, "Ubuntu Mono", "Liberation Mono", "Courier New", monospace !important;
    font-size: 14px !important;
    font-style: normal !important;
    font-weight: normal !important;
    color: #333 !important;
}

/* OTHERS */

/* #pxbetweennotes {
    height: 0px;
} */

input {
    width:100%;
    border:0px;
    text-overflow: ellipsis;
}

input[type="checkbox"], 
input[type="radio"] {
    width: auto;
}

.css-title {
    margin-top: 15px;
    margin-bottom: 20px;
    margin-left:-3px;
    font-size: 24px;
    font-weight: 600;
    color: #37352F;
    font-family: 'Inter', sans-serif;
}

.css-title:focus {
    border: none !important;
    outline: none;
    box-shadow: none;
}

hr {
    margin:0;
    border-top: 1px solid #ccc
}

/* LAST UPDATED AND CREATED DATES */

.lastupdated {
    float: none;
    margin-right: auto;
    margin-left: 0;
    font-size: 14px;
    font-family: 'Inter' !important;
    font-style: italic;
    font-weight: 400;
    margin-top: 7px;
    color: rgb(51,51,51) !important;
}

.toolbar-btn.save-modified {
    background: transparent !important;
    border: none !important;
    /* animation: pulse-save 2s infinite; */
}

/* Animation de pulsation pour le bouton save modifié */
@keyframes pulse-save {
    0% {
        transform: scale(1);
        box-shadow: 0 0 0 0 rgba(229, 57, 53, 0.4);
    }
    50% {
        transform: scale(1.05);
        box-shadow: 0 0 0 4px rgba(229, 57, 53, 0.2);
    }
    100% {
        transform: scale(1);
        box-shadow: 0 0 0 0 rgba(229, 57, 53, 0.0);
    }
}

/* Quand save est modifié, il reste rouge même au hover/focus */
.toolbar-btn.save-modified i.fas.fa-save {
    color: #e53935 !important;
}
.toolbar-btn.save-modified:hover i.fas.fa-save,
.toolbar-btn.save-modified:focus i.fas.fa-save {
    color: #e53935 !important;
}
.toolbar-btn.save-modified i.fas.fa-save::before {
    filter: brightness(0) saturate(100%) invert(35%) sepia(70%) saturate(4824%) hue-rotate(349deg) brightness(86%) contrast(89%) !important;
}
.toolbar-btn.save-modified:hover i.fas.fa-save::before,
.toolbar-btn.save-modified:focus i.fas.fa-save::before {
    filter: brightness(0) saturate(100%) invert(35%) sepia(70%) saturate(4824%) hue-rotate(349deg) brightness(86%) contrast(89%) !important;
}
/* Pour l'icône save normale, couleur gris foncé par défaut */
.toolbar-btn:not(.save-modified) i.fas.fa-save {
    color: inherit;
}
.toolbar-btn:not(.save-modified) i.fas.fa-save::before {
    filter: brightness(0) saturate(100%) invert(20%) sepia(10%) saturate(1000%) hue-rotate(33deg) brightness(95%) contrast(95%);
}

.toolbar-btn i.fas.fa-palette,
.toolbar-btn i.fas.fa-fill-drip {
    color: inherit !important;
}

/* Couleurs par défaut des icônes */
.toolbar-btn i.fas.fa-palette {
    color: #ff2222;
}

.toolbar-btn i.fas.fa-fill-drip {
    color: #ffe066;
}

.toolbar-btn:hover i.fas.fa-palette,
.toolbar-btn:focus i.fas.fa-palette {
    color: #ff2222 !important;
}

.toolbar-btn:hover i.fas.fa-fill-drip,
.toolbar-btn:focus i.fas.fa-fill-drip {
    color: #ffe066 !important;
}

.toolbar-btn.btn-ai i.fas.fa-robot {
    display: none;
}

.toolbar-btn.btn-ai .fa-robot-svg {
    filter: brightness(0) saturate(100%) invert(20%) sepia(10%) saturate(1000%) hue-rotate(33deg) brightness(95%) contrast(95%);
}

.toolbar-btn.btn-ai.loading .fa-robot-svg {
    animation: rotate 1s linear infinite;
}

@keyframes rotate {
    from { transform: rotate(0deg); }
    to { transform: rotate(360deg); }
}

/* Styles pour les cases à cocher dans les notes */
.noteentry label {
    user-select: none;
    margin: 0 !important;
    padding: 0 !important;
}

.noteentry label span[contenteditable="true"] {
    outline: none;
    border: none;
    user-select: text;
    cursor: text;
    white-space: nowrap;
    display: inline-block;
    min-width: 20px;
}

.noteentry label span[contenteditable="true"]:focus {
    background-color: rgba(0, 123, 255, 0.1);
    border-radius: 2px;
}

.noteentry label span[contenteditable="true"]:empty:before {
    content: "Type your task here";
    color: #999;
    font-style: italic;
}

/* FOLDER STYLES */

.folder-header {
    margin-bottom: 0px; /* Suppression de l'espace entre les dossiers */
    cursor: pointer;
    border-radius: 8px;
    transition: background-color 0.2s;
}

.folder-header.selected-folder {
    background-color: transparent;
}

.folder-header.drag-over {
    background-color: rgba(0, 125, 184, 0.1);
    border: 2px dashed #007DB8;
    box-shadow: 0 0 8px rgba(0, 125, 184, 0.3);
}

.folder-toggle {
    display: flex;
    align-items: center;
    padding: 8px 6px;
    cursor: pointer;
    border-radius: 8px;
    background-color: transparent;
    transition: background-color 0.2s;
    user-select: none;
    position: relative;
    width: 100%;
}

.folder-toggle:hover {
    background-color: transparent;
}

.folder-icon {
    font-size: 13px;
    color: #b0b0b0;
    margin-right: 8px;
    transition: transform 0.2s;
    width: 12px;
    align-content: center;
}

.folder-name {
    font-size: 14px;
    font-weight: 600;
    color: rgb(55, 53, 47);
    flex: 0 0 auto;
    min-width: 0;
}

.folder-note-count {
    font-size: 12px;
    color: #999;
    font-weight: 300;
    margin-left: 8px;
    flex: 0 0 auto;
}

.folder-actions {
    opacity: 0;
    transition: opacity 0.2s;
    margin-left: auto;
    flex: 0 0 auto;
}

.folder-toggle:hover .folder-actions {
    opacity: 1;
}

/* search-only hiding to avoid interfering with general hidden class */
.search-hidden { display: none !important; }

.folder-edit-btn, .folder-delete-btn, .folder-empty-btn, .folder-search-btn, .folder-move-files-btn {
    font-size: 12px;
    color: #007DB8;
    margin-left: 8px;
    cursor: pointer;
    padding: 4px;
    border-radius: 4px;
    transition: background-color 0.2s, color 0.2s;
}

.folder-search-btn {
    color: #007DB8; /* Blue by default (included in search) */
}

.folder-search-btn.excluded {
    color: #dc3545; /* Red when excluded from search */
    position: relative;
}

/* Add a diagonal line over excluded folder search buttons */
.folder-search-btn.excluded::after {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    width: 80%;
    height: 2px;
    background-color: #dc3545;
    transform: translate(-50%, -50%) rotate(-45deg);
    pointer-events: none;
    z-index: 1;
}

.folder-search-btn:hover {
    background-color: rgba(0, 125, 184, 0.2);
}

.folder-search-btn.excluded:hover {
    background-color: rgba(220, 53, 69, 0.2);
}

.folder-edit-btn:hover {
    background-color: rgba(0, 125, 184, 0.2);
}

/* Hide edit button for default folder to prevent renaming */
.default-folder .folder-edit-btn { display: none !important; }

.folder-delete-btn:hover {
    background-color: rgba(220, 53, 69, 0.2);
    color: #dc3545;
}

.folder-empty-btn:hover {
    background-color: rgba(255, 193, 7, 0.2);
    color: #ffc107;
}

.folder-move-files-btn:hover {
    background-color: rgba(0, 125, 184, 0.2);
    color: #007DB8;
}

.folder-content {
    margin-left: 29px;
    margin-bottom: 5px; /* Réduction de l'espace sous chaque dossier */
}

.note-in-folder {
    margin-bottom: 0px !important; /* Suppression de l'espace entre les notes */
    position: relative;
    display: flex !important;
    align-items: center !important;
    padding-left: 6px !important; /* Réduction du padding pour récupérer l'espace */
    transition: padding-left 0.2s;
}

.note-in-folder a.links_arbo_left {
    display: block !important;
    position: relative !important;
}

.note-in-folder a.links_arbo_left .note-title {
    white-space: nowrap !important;
    overflow: hidden !important;
    text-overflow: ellipsis !important;
    display: block !important;
    margin-left: 0px !important; /* Récupérer l'espace de l'icône supprimée */
    transition: margin-left 0.2s ease; /* Animation fluide */
}

/* Au survol, garder le titre à gauche (pas de changement) */
.note-in-folder:hover a.links_arbo_left .note-title {
    margin-left: 0px !important; /* Reste à gauche */
}

/* Drag and drop styles for notes */
.note-in-folder a.links_arbo_left[draggable="true"] {
    cursor: grab;
}

.note-in-folder a.links_arbo_left[draggable="true"]:active {
    cursor: grabbing;
}

.note-in-folder a.links_arbo_left.dragging {
    opacity: 0.5;
    transform: rotate(2deg);
}

.modal {
    display: none;
    position: fixed;
    z-index: 1000;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0,0,0,0.4);
    /* Modal uses flex layout when opened via JS (display: flex set dynamically) */
    align-items: flex-start; /* place modal content at the top when visible */
    justify-content: center;
    padding: 20px 16px 16px 16px; /* smaller top padding to move modals upward */
    box-sizing: border-box;
    overflow: auto;
}

.modal-content {
    background-color: #fefefe;
    padding: 20px;
    border: none;
    border-radius: 8px;
    width: 90%;
    max-width: 480px;
    margin: 0 auto; /* horizontal center; vertical spacing comes from .modal padding */
    font-family: 'Inter', sans-serif;
    box-shadow: 0 4px 20px rgba(0,0,0,0.3);
    box-sizing: border-box;
    /* prevent inner elements from causing horizontal overflow */
    overflow-x: hidden;
}

.modal-content h3 {
    margin-top: 0;
    margin-bottom: 15px;
    color: rgb(55, 53, 47);
    font-size: 18px;
    font-weight: 600;
}

.modal-content input, .modal-content select {
    width: 100%;
    padding: 8px 12px;
    margin-bottom: 15px;
    border: 1px solid #ddd;
    border-radius: 4px;
    font-size: 14px;
    font-family: 'Inter', sans-serif;
    box-sizing: border-box;
}

.modal-content input:focus, .modal-content select:focus {
    outline: none;
    border-color: #007DB8;
}

.modal-buttons {
    display: flex;
    gap: 10px;
    justify-content: flex-end;
    flex-shrink: 0;
    margin-top: auto;
    padding-top: 15px;
    border-top: 1px solid #e0e0e0;
    /* allow buttons to wrap instead of forcing a horizontal scroll */
    flex-wrap: wrap;
}

.modal-buttons button {
    padding: 8px 16px;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    font-size: 14px;
    font-family: 'Inter', sans-serif;
    transition: background-color 0.2s;
    /* allow buttons to shrink on narrow viewports */
    flex: 0 1 auto;
    min-width: 0;
}

/* Ensure buttons and form controls inside modals never exceed the modal width */
.modal-content .btn,
.modal-content button,
.modal-content input,
.modal-content select,
.modal-content textarea {
    max-width: 100% !important;
    box-sizing: border-box;
}

.modal-buttons button:first-child {
    background-color: #007DB8;
    color: white;
}

.modal-buttons button:first-child:hover {
    background-color: #005a8a;
}

.modal-buttons button:last-child {
    background-color: #f8f9fa;
    color: #333;
    border: 1px solid #ddd;
}

.modal-buttons button:last-child:hover {
    background-color: #e9ecef;
}

/* Respect explicit button classes for modals (take precedence over first/last child rules) */
.modal-buttons button.btn-primary {
    background-color: #007DB8;
    color: white;
    border: none;
}
.modal-buttons button.btn-primary:hover {
    background-color: #005a8a;
}
.modal-buttons button.btn-cancel {
    background-color: #f8f9fa;
    color: #333;
    border: 1px solid #ddd;
}
.modal-buttons button.btn-cancel:hover {
    background-color: #e9ecef;
}

/* Permanently Delete Note Modal: make Delete red and Cancel gray */
#deleteConfirmModal .btn-cancel {
    background-color: #6c757d !important;
    color: white !important;
    border: none !important;
}

#deleteConfirmModal .btn-cancel:hover {
    background-color: #5a6268 !important;
}

#deleteConfirmModal .btn-danger {
    background-color: #e04b4b !important;
    color: #fff !important;
    border: none !important;
    padding: 8px 12px;
    border-radius: 6px;
}

#deleteConfirmModal .btn-danger:hover {
    background-color: #c43b3b !important;
}

/* Empty Trash Modal: make Empty Trash red and Cancel gray */
#emptyTrashConfirmModal .btn-cancel {
    background-color: #6c757d !important;
    color: white !important;
    border: none !important;
}

#emptyTrashConfirmModal .btn-cancel:hover {
    background-color: #5a6268 !important;
}

#emptyTrashConfirmModal .btn-danger {
    background-color: #e04b4b !important;
    color: #fff !important;
    border: none !important;
    padding: 8px 12px;
    border-radius: 6px;
}

#emptyTrashConfirmModal .btn-danger:hover {
    background-color: #c43b3b !important;
}

/* Restore Confirmation Modal: make Restore primary blue and Cancel gray */
#restoreConfirmModal .btn-cancel {
    background-color: #6c757d !important;
    color: white !important;
    border: none !important;
}

#restoreConfirmModal .btn-cancel:hover {
    background-color: #5a6268 !important;
}

#restoreConfirmModal .btn-primary {
    background-color: #007DB8 !important;
    color: white !important;
    border: none !important;
}

#restoreConfirmModal .btn-primary:hover {
    background-color: #0056b3 !important;
}

.close {
    color: #aaa;
    float: right;
    font-size: 28px;
    font-weight: bold;
    line-height: 1;
    margin-top: -5px;
    cursor: pointer;
}

.close:hover,
.close:focus {
    color: #333;
    text-decoration: none;
}

.folders-list {
    max-height: 200px;
    overflow-y: auto;
    border: 1px solid #e0e0e0;
    border-radius: 4px;
    background-color: #fafafa;
    margin-top: 8px;
}

.folder-item {
    padding: 8px 12px;
    border-bottom: 1px solid #e0e0e0;
    font-size: 13px;
    color: #333;
    display: flex;
    align-items: center;
}

.folder-item:last-child {
    border-bottom: none;
}

.folder-item:hover {
    background-color: #f0f0f0;
}

.folder-item i {
    margin-right: 8px;
    color: #666;
    width: 12px;
}

.folder-search-section {
    margin-bottom: 0px;
}

.folder-search-section input {
    width: 100%;
    padding: 10px 12px;
    border: 2px solid #e0e0e0;
    border-radius: 6px;
    font-size: 14px;
    font-family: 'Inter', sans-serif;
    box-sizing: border-box;
    transition: border-color 0.2s;
}

.folder-search-section input:focus {
    outline: none;
    border-color: #007DB8;
    box-shadow: 0 0 0 3px rgba(0, 125, 184, 0.1);
}

.suggested-folder-option {
    display: inline-flex;
    align-items: center;
    padding: 6px 12px;
    background-color: #f5f5f5;
    border: 1px solid #e0e0e0;
    border-radius: 20px;
    cursor: pointer;
    font-size: 13px;
    color: #333;
    transition: all 0.2s;
    white-space: nowrap;
}

.suggested-folder-option:hover {
    background-color: #007DB8;
    color: white;
    border-color: #007DB8;
}

.suggested-folder-option.selected {
    background-color: #007DB8;
    color: white;
    border-color: #007DB8;
}

.suggested-folder-option i {
    margin-right: 6px;
    font-size: 12px;
}

.folder-option {
    display: flex;
    align-items: center;
    padding: 12px 15px;
    border-bottom: 1px solid #e0e0e0;
    cursor: pointer;
    transition: background-color 0.2s;
    font-size: 14px;
    color: #333;
}

.folder-option:last-child {
    border-bottom: none;
}

.folder-option:hover {
    background-color: #f0f6ff;
}

.folder-option.selected {
    background-color: #007DB8;
    color: white;
}

.folder-option.selected:hover {
    background-color: #005a8a;
}

.folder-option i {
    margin-right: 10px;
    width: 16px;
    color: #666;
    flex-shrink: 0;
}

.folder-option.selected i {
    color: white;
}

.folder-option .folder-name {
    flex: 1;
    font-weight: 500;
}

.folder-option .note-count {
    color: #888;
    font-size: 12px;
    margin-left: 8px;
}

.folder-option.selected .note-count {
    color: rgba(255, 255, 255, 0.8);
}

/* Create folder option styling */
.create-folder-option {
    background-color: #f8f9ff !important;
    border: 1px dashed #007DB8 !important;
    margin: 5px 0;
    border-radius: 4px;
}

.create-folder-option:hover {
    background-color: #e8f0ff !important;
    border-color: #0056b3 !important;
}

.create-folder-option .folder-name {
    color: #007DB8;
    font-weight: 500;
}

.create-folder-option i {
    color: #007DB8 !important;
}

.no-folders-found {
    padding: 20px;
    text-align: center;
    color: #888;
    font-style: italic;
}

/* Update modal buttons for new design */
#moveNoteFolderModal .modal-buttons {
    border-top: 1px solid #e0e0e0;
    padding-top: 15px;
    margin-top: auto;
    display: flex;
    gap: 10px;
    flex-shrink: 0;
}

#moveNoteFolderModal .modal-buttons button:first-child {
    background-color: #007DB8;
    color: white;
    flex: 1;
}

#moveNoteFolderModal .modal-buttons button:first-child:hover {
    background-color: #005a8a;
}

#moveNoteFolderModal .modal-buttons button:nth-child(2) {
    background-color: #28a745;
    color: white;
    flex: 1;
}

#moveNoteFolderModal .modal-buttons button:nth-child(2):hover {
    background-color: #218838;
}

.modal-error-message {
    text-align: center;
    color: #dc3545;
    font-size: 14px;
    margin-top: 15px;
    padding: 10px;
    border-radius: 4px;
    background-color: #f8d7da;
    border: 1px solid #f5c6cb;
    display: none;
}

.unified-search-container {
    width: 100%;
    max-width: 600px;
    display: flex;
    flex-direction: column;
    align-items: center;
}

.search-options-container {
    margin-top: 8px;
    padding: 0;
    animation: fadeIn 0.3s ease-out;
    display: flex;
    justify-content: center;
}

.search-type-pills {
    display: flex;
    gap: 6px;
    flex-wrap: wrap;
    align-items: center;
    justify-content: center;
}

.search-pill {
    background: #f8f9fa;
    border: 1px solid #dee2e6;
    border-radius: 14px;
    padding: 4px 10px;
    cursor: pointer;
    transition: all 0.3s ease;
    color: #6c757d;
    font-size: 0.8em;
    font-weight: 400;
    display: flex;
    align-items: center;
    gap: 4px;
    outline: none;
    position: relative;
    min-height: 28px;
    user-select: none;
    opacity: 0.8;
}

.search-pill:hover {
    background: #e9ecef;
    border-color: #007DB8;
    color: #007DB8;
    transform: translateY(-1px);
    box-shadow: 0 1px 3px rgba(0, 125, 184, 0.1);
    opacity: 1;
}

.search-pill:active {
    transform: translateY(0);
    box-shadow: 0 1px 2px rgba(0, 125, 184, 0.1);
}

.search-pill.active {
    background: #f8f9fa;
    border-color: #007DB8;
    color: #007DB8;
    box-shadow: 0 1px 3px rgba(0, 125, 184, 0.1);
    opacity: 1;
}

.search-pill.active:hover {
    background: #e9ecef;
    border-color: #007DB8;
    color: #007DB8;
    transform: translateY(-1px);
    box-shadow: 0 2px 4px rgba(0, 125, 184, 0.15);
}

.search-pill.active:active {
    transform: translateY(0);
    box-shadow: 0 1px 2px rgba(0, 125, 184, 0.1);
}

.search-pill i {
    font-size: 0.75em;
}

.search-pill span {
    font-size: 0.8em;
}

@keyframes fadeIn {
    from {
        opacity: 0;
        transform: translateY(-5px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* Force correct appearance for active search pills on ALL devices */
.search-pill.active,
body .search-pill.active,
html .search-pill.active {
    background: #f8f9fa !important;
    background-color: #f8f9fa !important;
    border-color: #007DB8 !important;
    color: #007DB8 !important;
    box-shadow: 0 1px 3px rgba(0, 125, 184, 0.1) !important;
    opacity: 1 !important;
}

.search-pill.active:hover,
body .search-pill.active:hover,
html .search-pill.active:hover {
    background: #e9ecef !important;
    background-color: #e9ecef !important;
    border-color: #007DB8 !important;
    color: #007DB8 !important;
    transform: translateY(-1px);
    box-shadow: 0 2px 4px rgba(0, 125, 184, 0.15) !important;
}

.search-pill.active:active,
body .search-pill.active:active,
html .search-pill.active:active {
    background: #e9ecef !important;
    background-color: #e9ecef !important;
    transform: translateY(0);
    box-shadow: 0 1px 2px rgba(0, 125, 184, 0.1) !important;
}

/* Legacy search-type-btn styles - keep for JS compatibility */
.search-type-btn {
    background: transparent;
    border: none;
    border-radius: 4px;
    padding: 4px 6px;
    cursor: pointer;
    transition: all 0.2s ease;
    color: #b0b0b0;
    font-size: 0.85em;
    min-width: 28px;
    height: 28px;
    display: flex;
    align-items: center;
    justify-content: center;
}

.search-type-btn:hover {
    background: rgba(0, 125, 184, 0.1);
}

.search-type-btn:hover i {
    color: #007DB8;
}

.search-type-btn.active i {
    color: #007DB8;
}

.search-type-btn.active:hover i {
    color: #007DB8;
}

.searchbar-row {
    display: flex;
    align-items: center;
    width: 100%;
    position: relative;
}

/* Search validation error styles */
.search-validation-error {
    background-color: #ffebee;
    color: #d32f2f;
    padding: 8px 12px;
    border-radius: 4px;
    font-size: 0.85em;
    margin: 8px 0 4px 0;
    border-left: 3px solid #d32f2f;
    animation: slideDown 0.3s ease-out;
}

@keyframes slideDown {
    from {
        opacity: 0;
        transform: translateY(-10px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.search-type-btn-error {
    animation: shake 0.5s ease-in-out;
    border-color: #d32f2f !important;
    background-color: #ffebee !important;
}

@keyframes shake {
    0%, 100% { transform: translateX(0); }
    25% { transform: translateX(-3px); }
    75% { transform: translateX(3px); }
}

/* CACHER LES BARRES DE SCROLL */

/* Cacher la barre de scroll pour Webkit browsers (Chrome, Safari, Edge) */
::-webkit-scrollbar {
    display: none;
}

/* Cacher la barre de scroll pour Firefox */
* {
    scrollbar-width: none;
}

/* Alternative pour cacher toutes les barres de scroll */
html, body, #left_col {
    -ms-overflow-style: none;  /* Internet Explorer 10+ */
    scrollbar-width: none;  /* Firefox */
}

#right_col {
    -ms-overflow-style: auto;  /* Internet Explorer 10+ */
    scrollbar-width: auto;  /* Firefox */
}

html::-webkit-scrollbar, 
body::-webkit-scrollbar, 
#left_col::-webkit-scrollbar {
    display: none;
}

#right_col::-webkit-scrollbar {
    display: block;
    width: 8px;
}

#right_col::-webkit-scrollbar-track {
    background: #f1f1f1;
}

#right_col::-webkit-scrollbar-thumb {
    background: #c1c1c1;
    border-radius: 4px;
}

#right_col::-webkit-scrollbar-thumb:hover {
    background: #a8a8a8;
}

/* Hide webkit search controls (native blue cross) for all search inputs */
.searchbar-input::-webkit-search-decoration,
.searchbar-input::-webkit-search-cancel-button,
.searchbar-input::-webkit-search-results-button,
.searchbar-input::-webkit-search-results-decoration {
    -webkit-appearance: none;
    display: none;
}

/* Also apply to inputs with search class */
.search::-webkit-search-decoration,
.search::-webkit-search-cancel-button,
.search::-webkit-search-results-button,
.search::-webkit-search-results-decoration {
    -webkit-appearance: none;
    display: none;
}

/* General rule for any input that might have search type */
input[type="search"]::-webkit-search-decoration,
input[type="search"]::-webkit-search-cancel-button,
input[type="search"]::-webkit-search-results-button,
input[type="search"]::-webkit-search-results-decoration {
    -webkit-appearance: none;
    display: none;
}

/* EMOJI PICKER STYLES */

.emoji-picker {
    position: fixed;
    background: white;
    border: 1px solid #ddd;
    border-radius: 12px;
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
    z-index: 1000;
    width: 360px;
    max-height: 400px;
    overflow-y: auto;
    font-family: 'Inter', sans-serif;
    box-sizing: border-box;
    padding: 10px;
}

.emoji-category {
    padding: 15px 0;
    border-bottom: 1px solid #f0f0f0;
    width: 100%;
}

.emoji-category:last-child {
    border-bottom: none;
}

.emoji-grid {
    display: grid;
    grid-template-columns: repeat(8, 1fr);
    gap: 10px;
    justify-items: center;
    padding: 5px 15px;
    width: 100%;
    box-sizing: border-box;
}

.emoji-item {
    font-size: 18px;
    width: 30px;
    height: 30px;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    border-radius: 6px;
    transition: background-color 0.2s ease;
    user-select: none;
}

.emoji-item:hover {
    background-color: #f0f8ff;
    transform: scale(1.1);
}

.emoji-item:active {
    transform: scale(0.95);
}

/* Custom scrollbar for emoji picker */
.emoji-picker::-webkit-scrollbar {
    width: 8px;
}

.emoji-picker::-webkit-scrollbar-track {
    background: #f1f1f1;
    border-radius: 10px;
}

.emoji-picker::-webkit-scrollbar-thumb {
    background: #c1c1c1;
    border-radius: 10px;
}

.emoji-picker::-webkit-scrollbar-thumb:hover {
    background: #a8a8a8;
}

/* Mobile responsive styles for emoji picker */
@media (max-width: 800px) {
    .emoji-picker {
        width: 300px !important;
        max-height: 350px !important;
        padding: 8px !important;
    }
    
    .emoji-grid {
        grid-template-columns: repeat(7, 1fr) !important;
        gap: 8px !important;
        padding: 3px 12px !important;
    }
    
    .emoji-item {
        font-size: 16px !important;
        width: 28px !important;
        height: 28px !important;
    }
    
    .emoji-category {
        padding: 10px 0 !important;
    }
}

/* Smart folder search styling */
.folder-search-container {
    position: relative;
    margin: 15px 0 20px 0;
}

.folder-search-input {
    width: 100%;
    padding: 12px 16px;
    border: 2px solid #dee2e6;
    border-radius: 6px;
    font-size: 14px;
    background-color: white;
    transition: border-color 0.2s ease, box-shadow 0.2s ease;
}

.folder-search-input:focus {
    outline: none;
    border-color: #007DB8;
    box-shadow: 0 0 0 3px rgba(0, 125, 184, 0.1);
}

.recent-folders-section {
    margin-top: 12px;
    margin-bottom: 15px;
}

.recent-folders-label {
    font-size: 12px;
    color: #6c757d;
    margin-bottom: 6px;
    font-weight: 500;
}

.recent-folders-list {
    display: flex;
    gap: 8px;
    flex-wrap: wrap;
}

.recent-folder-item {
    display: inline-flex;
    align-items: center;
    padding: 6px 12px;
    background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
    border: 1px solid #dee2e6;
    border-radius: 16px;
    font-size: 13px;
    color: #495057;
    cursor: pointer;
    transition: all 0.2s ease;
    user-select: none;
}

.recent-folder-item:hover {
    background: linear-gradient(135deg, #007DB8 0%, #0056b3 100%);
    color: white;
    border-color: #007DB8;
    transform: translateY(-1px);
    box-shadow: 0 2px 4px rgba(0, 125, 184, 0.2);
}

.recent-folder-icon {
    margin-right: 6px;
    font-size: 11px;
}

.recent-folder-item:hover .recent-folder-icon {
    color: white;
}

.folder-dropdown {
    position: absolute;
    top: 100%;
    left: 0;
    right: 0;
    background: white;
    border: 1px solid #dee2e6;
    border-top: none;
    border-radius: 0 0 6px 6px;
    max-height: 200px;
    overflow-y: auto;
    z-index: 1000;
    display: none;
}

.folder-dropdown.show {
    display: block;
}

.folder-option {
    padding: 10px 16px;
    cursor: pointer;
    border-bottom: 1px solid #f1f3f4;
    transition: background-color 0.2s ease;
    display: flex;
    align-items: center;
}

.folder-option:last-child {
    border-bottom: none;
}

.folder-option:hover,
.folder-option.highlighted {
    background-color: #f8f9fa;
}

.folder-option.selected {
    background-color: #007DB8;
    color: white;
}

.folder-option-icon {
    margin-right: 8px;
    color: #6c757d;
    font-size: 14px;
}

.folder-option.selected .folder-option-icon {
    color: white;
}

.create-folder-option {
    padding: 12px 16px;
    background: linear-gradient(135deg, #e3f2fd 0%, #f8f9fa 100%);
    border-bottom: 1px solid #007DB8;
    color: #007DB8;
    font-weight: 500;
}

.create-folder-option:hover {
    background: linear-gradient(135deg, #bbdefb 0%, #e3f2fd 100%);
}

.create-folder-option .folder-option-icon {
    color: #007DB8;
}

.modal-error-message {
    background-color: #f8d7da;
    color: #721c24;
    padding: 10px;
    border-radius: 4px;
    margin-top: 10px;
    border: 1px solid #f5c6cb;
}

/* Search highlight styles */
.search-highlight {
    background-color: #ffff00 !important;
    color: #000 !important;
    font-weight: normal !important; /* Normal weight, not bold */
    font-family: inherit !important;
    font-style: normal !important;
    text-decoration: none !important;
    border-radius: 2px;
    padding: 1px 2px;
    box-shadow: 0 1px 3px rgba(255, 255, 0, 0.3);
    display: inline !important;
    line-height: inherit !important;
}

.search-highlight.current {
    background-color: #ff6b35 !important;
    color: white !important;
    font-weight: normal !important;
    animation: highlightPulse 1.5s ease-in-out infinite;
}

@keyframes highlightPulse {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.7; }
}

/* Input highlight overlay for precise word highlighting in input elements */
.input-highlight-overlay {
    background-color: #ffff00 !important;
    opacity: 0.7;
    border-radius: 2px;
    box-shadow: 0 1px 3px rgba(255, 255, 0, 0.3);
}

/* Note Loading State Styles */
.note-loading-state {
    display: flex;
    justify-content: center;
    align-items: center;
    height: 300px;
    flex-direction: column;
}

.loading-spinner {
    text-align: center;
    color: #666;
}

.loading-spinner i {
    font-size: 2em;
    margin-bottom: 15px;
    color: #007bff;
}

.loading-spinner p {
    margin: 0;
    font-size: 1.1em;
}

@keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}

.fa-spin {
    animation: spin 2s linear infinite;
}

/* Smooth transition for note selection */
.links_arbo_left {
    transition: background-color 0.2s ease, border-left 0.2s ease;
}

.links_arbo_left.selected-note {
    background-color: transparent !important;
    border-left: none !important;
}

/* Styles responsive pour les modals sur mobile */
@media (max-width: 768px) {
    .modal-content {
    margin: 0 auto;
    width: calc(100% - 40px);
    max-width: 480px;
    margin-left: 20px;
    margin-right: 20px;
    }
    
    .modal-content.ai-summary-simple {
        margin: 0 auto;
        width: calc(100% - 30px);
        margin-left: 15px;
        margin-right: 15px;
        max-width: 480px;
    }
    
    /* Menu AI mobile avec positionnement adapté */
    .ai-dropdown.mobile .ai-menu {
        position: fixed !important;
        top: 120px !important;
        left: 50% !important;
        transform: translateX(-50%) !important;
        margin-top: 0 !important;
        border-radius: 12px;
        box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
        z-index: 99999 !important;
    }
    
    .note-loading-state {
        height: 200px;
    }
    
    .loading-spinner i {
        font-size: 1.5em;
    }
}

/* Editable tags styling */
.editable-tags-container {
    display: flex;
    flex-wrap: wrap;
    gap: 6px;
    align-items: center;
    min-height: 24px;
    border: 1px solid transparent;
    border-radius: 4px;
    padding: 4px;
    transition: border-color 0.2s ease;
    overflow: visible;
}

.clickable-tag-wrapper {
    display: inline-flex;
    align-items: center;
    background: #f0f4f8;
    border: 1px solid #e2e8f0;
    border-radius: 12px;
    transition: all 0.2s ease;
}

.clickable-tag-wrapper:hover {
    background: #e2e8f0;
    border-color: #cbd5e1;
}

.clickable-tag {
    color: #007DB8;
    padding: 4px 8px 4px 8px;
    font-size: 13px;
    cursor: pointer;
    display: inline-block;
    text-decoration: none;
    line-height: 1.2;
}

.clickable-tag:hover {
    color: #005a8a;
    text-decoration: none;
}

.clickable-tag:visited {
    color: #007DB8;
}

.clickable-tag:hover:visited {
    color: #005a8a;
}

.tag-delete-button {
    color: #94a3b8;
    padding: 4px 6px 4px 2px;
    font-size: 14px;
    font-weight: bold;
    cursor: pointer;
    transition: color 0.2s ease;
    line-height: 1;
}

.tag-delete-button:hover {
    color: #ef4444;
}

/* When a tag wrapper is highlighted, give the delete button a subtle yellow background and stronger contrast */
.clickable-tag-wrapper.tag-highlight {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    padding: 2px 6px;
    border-radius: 8px;
    background: #fff3b0;
}

.clickable-tag-wrapper.tag-highlight .clickable-tag {
    color: #2b2b2b;
}

.clickable-tag-wrapper.tag-highlight .tag-delete-button {
    background: rgba(0,0,0,0.06);
    border-radius: 4px;
    color: #7a3b00;
}

.tag-input {
    border: none;
    outline: none;
    background: transparent;
    padding: 4px 8px;
    font-size: 13px;
    font-family: 'Inter', sans-serif;
    color: #37352F;
    min-width: 60px;
    max-width: 150px;
    flex-shrink: 0;
    white-space: nowrap;
    overflow: hidden;
    resize: none;
}

.tag-input::placeholder {
    color: #bababa;
    font-style: italic;
}

.tag-input:focus {
    outline: none;
    background: rgba(0, 125, 184, 0.1);
    border-radius: 4px;
}

/* Hide emoji icons site-wide when user disables them in settings */
.emoji-hidden .emoji-icon {
    display: none !important;
}

/* Also hide FontAwesome smile icons, emoji toolbar buttons and the emoji picker when disabled */
.emoji-hidden .fa-smile,
.emoji-hidden .btn-emoji,
.emoji-hidden .btn-emoji i,
.emoji-hidden .emoji-picker {
    display: none !important;
}

/* Exception: keep the smile icon visible inside the Settings card (#emoji-icons-card) */
.emoji-hidden #emoji-icons-card .fa-smile,
.emoji-hidden #emoji-icons-card i {
    display: inline-block !important;
    color: inherit !important;
}

/* Hide original input when showing editable tags */
.name_tags.showing-editable-tags > input {
    display: none;
}

.name_tags.showing-editable-tags {
    overflow: visible;
    white-space: normal;
}

/* Move folder files modal styles */
#moveFolderFilesModal .modal-content {
    max-width: 500px;
}

#moveFolderFilesModal h3 {
    color: #333;
    margin-bottom: 15px;
    border-bottom: 2px solid #007DB8;
    padding-bottom: 8px;
}

#moveFolderFilesModal p {
    margin-bottom: 15px;
    color: #666;
}

#moveFolderFilesModal #sourceFolderName {
    font-weight: bold;
    color: #007DB8;
}

#moveFolderFilesModal #targetFolderSelect {
    width: 100%;
    padding: 10px;
    border: 1px solid #ddd;
    border-radius: 6px;
    font-size: 14px;
    margin-bottom: 15px;
    background: white;
}

#moveFolderFilesModal #targetFolderSelect:focus {
    outline: none;
    border-color: #007DB8;
    box-shadow: 0 0 0 2px rgba(0, 125, 184, 0.2);
}

.modal-info-message {
    background: rgba(0, 125, 184, 0.1);
    border: 1px solid rgba(0, 125, 184, 0.3);
    border-radius: 6px;
    padding: 10px;
    margin: 15px 0;
    color: #005a84;
}

.modal-info-message i {
    margin-right: 8px;
    color: #007DB8;
}

#moveFolderFilesModal .btn-primary:disabled {
    background-color: #ccc;
    cursor: not-allowed;
    opacity: 0.6;
}

#moveFolderFilesModal .btn-primary:disabled:hover {
    background-color: #ccc;
}

/* Ensure moveFolderFilesModal buttons use class-based coloring regardless of DOM order */
#moveFolderFilesModal .modal-buttons {
    justify-content: flex-end; /* keep buttons to the right */
}

#moveFolderFilesModal .modal-buttons .btn-cancel {
    background-color: #f8f9fa !important;
    color: #333 !important;
    border: 1px solid #ddd !important;
}

#moveFolderFilesModal .modal-buttons .btn-cancel:hover {
    background-color: #e9ecef !important;
}

#moveFolderFilesModal .modal-buttons .btn-primary {
    background-color: #007DB8 !important;
    color: #fff !important;
}

#moveFolderFilesModal .modal-buttons .btn-primary:hover {
    background-color: #0056b3 !important;
}

/* Small workspace button near settings */

/* Make the small workspace button use the same styling as other header icon buttons */
.small-workspace-btn {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 36px;
    height: 36px;
    cursor: pointer;
    margin: 4px;
    color: #007DB8;
    font-size: 16px;
    border-radius: 4px;
    transition: background-color 0.2s, color 0.2s;
    user-select: none;
}

.small-workspace-btn:hover {
    background-color: rgba(0, 125, 184, 0.1);
    color: #005a8a;
}

.workspace-dropdown {
    position: relative;
    display: inline-block;
}

.workspace-menu {
    position: absolute;
    top: 100%;
    left: 50%;
    transform: translateX(-50%);
    background-color: #fff;
    border: 1px solid #ddd;
    border-radius: 8px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    min-width: 200px;
    z-index: 1000;
    display: none;
    margin-top: 4px;
}

.workspace-menu-item {
    padding: 12px 16px;
    cursor: pointer;
    display: flex;
    align-items: center;
    transition: background-color 0.2s;
    border-bottom: 1px solid #f0f0f0;
    font-size: 14px;
}

.workspace-menu-item:last-child {
    border-bottom: none;
}

.workspace-menu-item:hover {
    background-color: #f8f9fa;
}

.workspace-menu-item.current-workspace {
    background-color: #e3f2fd;
    font-weight: 600;
    color: #007DB8;
}

.workspace-menu-item i {
    margin-right: 8px;
    width: 16px;
    text-align: center;
    color: #666;
}

.workspace-menu-item.current-workspace i {
    color: #007DB8;
}

.workspace-menu-divider {
    height: 1px;
    background-color: #e0e0e0;
    margin: 4px 0;
}

/* Mobile workspace dropdown adjustments */
@media (max-width: 768px) {
    .workspace-menu {
        position: absolute;
        left: 50%;
        transform: translateX(-50%);
        right: auto;
        min-width: 180px;
        margin-top: 4px;
    }
}

/* Desktop home button visibility control */
.desktop-home-btn {
    display: none !important;
}

/* Show home button on desktop when left column is hidden (small screens) */
@media (max-width: 1024px) {
    .desktop-home-btn {
        display: flex !important;
    }
}

/* Hide home button on very small screens where mobile layout takes over */
@media (max-width: 768px) {
    .desktop-home-btn {
        display: none !important;
    }
}

