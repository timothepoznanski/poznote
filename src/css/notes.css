/**
 * Notes Styles
 * 
 * Styles for note display and editing including note list sublines,
 * note tags, folder badges, editable tags, attachments, note entry content,
 * media embeds, input styles, timestamps, save animations, icons, and checkboxes.
 */

/* Note list subline (created date) */
.note-subline {
    font-size: 0.95em;
    /* slightly smaller than normal */
    color: #6b7280;
    margin-top: -2px;
    /* space between title and subline */
    margin-bottom: 18px;
    /* same space between subline and note content */
    display: none;
    /* hidden by default */
}

.note-subline .note-sub-sep {
    margin: 0 6px;
    color: #cbd5e1;
}

/* When enabled via settings, show the created date */
body.show-note-created .note-subline {
    display: inline-block;
}

/* Hide separator when created date is not shown or solo */
body:not(.show-note-created) .note-sub-created {
    display: none;
}

body:not(.show-note-created) .note-sub-sep {
    display: none;
}

/* Right-column title spacing adjustments */
.innernote h4 {
    margin: 0 0 8px 0;
}

.innernote h4 .css-title {
    width: 100%;
    box-sizing: border-box;
}

.workspace-list .action-btn {
    min-width: 140px;
    padding: 10px 16px;
    border-radius: 8px;
    font-size: 1rem;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    transition: transform 0.12s ease, box-shadow 0.12s ease;
    margin: 0;
    /* ensure uniform spacing controlled by gap on the container */
}

/* Links Arbo Left - note links in sidebar */
a.links_arbo_left,
a.links_arbo_left:link,
a.links_arbo_left:visited,
a.links_arbo_left:hover,
a.links_arbo_left:active {
    display: inline-block;
    width: 100%;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    vertical-align: top;
    text-decoration: none;
    color: rgb(55, 53, 47);
    padding: 3px 6px 3px 0px;
    /* Réduction du padding vertical (6px → 3px) */
    border-radius: 8px;
    font-size: 14px;
    line-height: 1.2;
    font-weight: normal;
    box-sizing: border-box;
}

/* Specific rule for note title spans in all links */
a.links_arbo_left .note-title {
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    display: block;
}

a.links_arbo_left.selected-note {
    background-color: transparent;
}

/* Note Tags Row */
.note-tags-row {
    display: flex;
    align-items: center;
    overflow: visible;
    /* margin-bottom: 15px; */
    margin-top: 5px;
}

.fa-folder.icon_folder {
    font-size: 14px;
    margin-right: 8px;
    flex-shrink: 0;
    align-self: center;
    line-height: 1;
    color: #6c757d;
}

.fa-folder.icon_folder::before {
    font-family: "Font Awesome 5 Pro";
    font-weight: 300;
    content: "\f07b";
    font-style: normal;
    -moz-osx-font-smoothing: grayscale;
    -webkit-font-smoothing: antialiased;
    display: inline-block;
    font-variant: normal;
    text-rendering: auto;
    line-height: 1;
    font-size: 1em;
    vertical-align: middle;
}

/* Folder Name badge */
.folder_name {
    font-size: 13px;
    color: #37352F;
    flex-shrink: 0;
    margin-right: 20px;
    background: #f0f4f8;
    padding: 4px 8px;
    border-radius: 12px;
    border: 1px solid #e2e8f0;
    display: inline-block;
    line-height: 1.2;
    transition: all 0.2s ease;
}

.folder_name:hover {
    background: #e2e8f0;
    border-color: #cbd5e1;
}

.folder-wrapper {
    display: inline-flex;
    align-items: center;
}

/* Tag Icon & Name Tags */
.fa-tag.icon_tag {
    font-size: 14px;
    margin-right: 4px;
    flex-shrink: 0;
    align-self: center;
    line-height: 1;
    /* avoid extra vertical spacing */
    cursor: pointer;
    color: #6c757d;
}

.fa-tag.icon_tag:hover {
    opacity: 0.7;
}

.fa-tag.icon_tag::before {
    font-family: "Font Awesome 5 Pro";
    font-weight: 300;
    content: "\f02c";
    font-style: normal;
    -moz-osx-font-smoothing: grayscale;
    -webkit-font-smoothing: antialiased;
    display: inline-block;
    font-variant: normal;
    text-rendering: auto;
    line-height: 1;
    font-size: 0.875em;
    vertical-align: middle;
}

.name_tags {
    flex: 1;
    min-width: 0;
    overflow: visible;
    color: rgb(55, 53, 47) !important;
}

.name_tags * {
    color: rgb(55, 53, 47) !important;
}

/* Remove border on focus for tags input */
.name_tags input:focus {
    border: none !important;
    outline: none;
}

.add-margin {
    margin: 8px 5px;
    font-family: 'Inter', sans-serif !important;
    font-size: 15px;
}

/* Editable Tags Container */
.editable-tags-container {
    display: flex;
    flex-wrap: nowrap;
    gap: 6px;
    align-items: center;
    min-height: 24px;
    border: 1px solid transparent;
    border-radius: 4px;
    padding: 4px;
    transition: border-color 0.2s ease;
    overflow-x: auto;
    overflow-y: hidden;
    white-space: nowrap;
    scrollbar-width: none;
    /* Firefox */
    -ms-overflow-style: none;
    /* IE/Edge */
}

.editable-tags-container::-webkit-scrollbar {
    width: 0;
    height: 0;
    display: none;
}

.clickable-tag-wrapper {
    display: inline-flex;
    align-items: center;
    background: #f0f4f8;
    border: 1px solid #e2e8f0;
    border-radius: 12px;
    transition: all 0.2s ease;
    flex-shrink: 0;
}

.clickable-tag-wrapper:hover {
    background: #e2e8f0;
    border-color: #cbd5e1;
}

.clickable-tag {
    color: #007DB8;
    padding: 4px 8px 4px 8px;
    font-size: 13px;
    cursor: pointer;
    display: inline-block;
    text-decoration: none;
    line-height: 1.2;
}

.clickable-tag:hover {
    color: #005a8a;
    text-decoration: none;
}

.clickable-tag:visited {
    color: #007DB8;
}

.clickable-tag:hover:visited {
    color: #005a8a;
}

.tag-delete-button {
    color: #94a3b8;
    padding: 4px 6px 4px 2px;
    font-size: 14px;
    font-weight: bold;
    cursor: pointer;
    transition: color 0.2s ease;
    line-height: 1;
}

.tag-delete-button:hover {
    color: #ef4444;
}

/* When a tag wrapper is highlighted, give the delete button a subtle yellow background and stronger contrast */
.clickable-tag-wrapper.tag-highlight {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    padding: 2px 6px;
    border-radius: 8px;
    background: #fff3b0;
}

.clickable-tag-wrapper.tag-highlight .clickable-tag {
    color: #2b2b2b;
}

.clickable-tag-wrapper.tag-highlight .tag-delete-button {
    background: rgba(0, 0, 0, 0.06);
    border-radius: 4px;
    color: #7a3b00;
}

.tag-input {
    border: none;
    outline: none;
    background: transparent;
    padding: 4px 8px;
    font-size: 13px;
    font-family: 'Inter', sans-serif;
    color: #37352F;
    min-width: 60px;
    max-width: 150px;
    flex-shrink: 0;
    white-space: nowrap;
    overflow: hidden;
    resize: none;
}

.tag-input::placeholder {
    color: #bababa;
    font-style: italic;
}

.tag-input:focus {
    outline: none;
    background: rgba(0, 125, 184, 0.1);
    border-radius: 4px;
}

/* Attachments Row */
.note-attachments-row {
    display: flex;
    align-items: center;
    margin-bottom: 5px;
    margin-top: 15px;
}

.fa-paperclip.icon_attachment {
    font-size: 14px;
    margin-right: 14px;
    flex-shrink: 0;
    /* color: #007DB8; */
    align-self: center;
    line-height: 1;
}

.note-attachments-list {
    flex: 1;
    min-width: 0;
    line-height: 1.4;
}

.attachment-link {
    color: #007DB8 !important;
    text-decoration: none;
    font-size: 14px;
    transition: color 0.2s;
    cursor: pointer;
    display: inline-block;
    margin: 2px 4px 2px 8px;
    /* left margin to match tag spacing */
    word-break: break-word;
}

/* Make the button wrapper for the paperclip visually neutral so only the icon shows */
.icon-attachment-btn {
    background: transparent;
    border: none;
    padding: 0;
    margin: 0;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    line-height: 1;
}

.icon-attachment-btn:focus {
    outline: 2px solid rgba(0, 125, 184, 0.25);
    outline-offset: 2px;
    border-radius: 4px;
}

.attachment-link:hover {
    color: #005a8b !important;
    text-decoration: underline;
}

.attachment-link:visited {
    color: #007DB8 !important;
}

/* ContentEditable Placeholder */
div[contentEditable=true]:empty:before {
    content: attr(data-ph);
    color: #bababa;
}

/* Placeholder lines around embedded Excalidraw diagrams */
.excalidraw-placeholder:empty:before {
    content: attr(data-ph);
    color: #999;
    font-style: italic;
    opacity: 0.6;
}

/* Exclure les blocs de code du placeholder automatique */
.code-block:empty:before,
.noteentry .code-block:empty:before {
    content: none !important;
}

/* Placeholder for code blocks - before and after */
p.code-block-placeholder-before[data-ph]:empty:before,
p.code-block-placeholder-after[data-ph]:empty:before {
    content: attr(data-ph);
    color: #999;
    font-style: italic;
    opacity: 0.6;
}

/* Note Card & Inner Note */
.notecard {
    margin-left: 1%;
    margin-right: 1%;
    margin-bottom: 20px;
    background: white;
    border-radius: 5px;
    font-family: 'Inter', sans-serif;
}

.innernote {
    padding-left: 2%;
    padding-top: 0px;
    padding-right: 2%;
    padding-bottom: 5px;
    font-family: 'Inter', sans-serif;
    display: flex;
    flex-direction: column;
}

/* Textarea */
textarea {
    padding: 0;
    padding-top: 30px;
    width: 100%;
    border: 0 none white;
    overflow: hidden;
    outline: none;
    resize: none;
    font-family: 'Inter', sans-serif;
}

textarea:focus {
    border-bottom: 1px;
    outline: 0;
}

/* Note Entry - headings, content area */
.noteentry {
    padding: 0;
    width: 100%;
    border: 0 none white;
    overflow-wrap: break-word;
    outline: none;
    resize: none;
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
}

.noteentry,
.noteentry *:not(.fa):not(.fab):not(.fas):not(.far):not(.fal):not(.fad):not(i):not([class*="fa-"]):not(h1):not(h2):not(h3):not(h4):not(h5):not(h6) {
    font-size: var(--note-font-size, 15px) !important;
}

.noteentry p,
.noteentry div {
    margin: 0;
    padding: 0;
}

/* Heading styles - must have higher specificity to override font-size */
.noteentry h1 {
    font-size: 2em !important;
    font-weight: bold;
    margin: 0.67em 0;
}

.noteentry h2 {
    font-size: 1.5em !important;
    font-weight: bold;
    margin: 0.83em 0;
}

.noteentry h3 {
    font-size: 1.17em !important;
    font-weight: bold;
    margin: 1em 0;
}

.noteentry h4 {
    font-size: 1em !important;
    font-weight: bold;
    margin: 1.33em 0;
}

.noteentry h5 {
    font-size: 0.83em !important;
    font-weight: bold;
    margin: 1.67em 0;
}

.noteentry h6 {
    font-size: 0.67em !important;
    font-weight: bold;
    margin: 2.33em 0;
}

/* Ensure headings inside <font> tags keep their size */
.noteentry font h1,
.noteentry font h2,
.noteentry font h3,
.noteentry font h4,
.noteentry font h5,
.noteentry font h6,
.noteentry h1 font,
.noteentry h2 font,
.noteentry h3 font,
.noteentry h4 font,
.noteentry h5 font,
.noteentry h6 font {
    font-size: inherit !important;
}

.noteentry:focus {
    border-bottom: 1px;
    outline: 0;
}

/* Media Embeds - images, iframes, video, audio */
/* Optimize image and iframe rendering for better performance and responsiveness */
.noteentry img,
.noteentry iframe {
    max-width: 100%;
    height: auto;
}

.noteentry img {
    /* Prevent layout shifts while images load */
    content-visibility: auto;
    /* Hint browser about size for better performance */
    contain-intrinsic-size: 300px 200px;
    /* Async decoding to avoid blocking main thread */
    image-rendering: auto;
}

.noteentry iframe {
    /* Default aspect ratio for videos, can be overridden */
    aspect-ratio: 16 / 9;
    border: none;
}

/* Video embeds from attachments */
.noteentry video,
.noteentry .note-video-embed {
    max-width: 100%;
    height: auto;
    border-radius: 8px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    background: #000;
    display: block;
    margin: 10px 0;
}

/* Audio iframe player (Chrome cannot render <audio> controls inside contenteditable) */
.noteentry .note-audio-iframe {
    max-width: 250px;
    width: 100%;
    height: 54px;
    border: none;
    border-radius: 8px;
    display: block;
    margin: 10px 0;
    background: #f1f3f4;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
}

/* Font Application - Inter font */
/* Apply Inter to text elements, except in code blocks and monospace elements */
.noteentry p:not([style*='Consolas']):not([style*='Monaco']):not([style*='Courier']):not([style*='monospace']):not([style*='Segoe UI Mono']),
.noteentry div:not([style*='Consolas']):not([style*='Monaco']):not([style*='Courier']):not([style*='monospace']):not([style*='Segoe UI Mono']),
.noteentry ul:not([style*='Consolas']):not([style*='Monaco']):not([style*='Courier']):not([style*='monospace']):not([style*='Segoe UI Mono']),
.noteentry ol:not([style*='Consolas']):not([style*='Monaco']):not([style*='Courier']):not([style*='monospace']):not([style*='Segoe UI Mono']),
.noteentry li:not([style*='Consolas']):not([style*='Monaco']):not([style*='Courier']):not([style*='monospace']):not([style*='Segoe UI Mono']),
.noteentry b:not([style*='Consolas']):not([style*='Monaco']):not([style*='Courier']):not([style*='monospace']):not([style*='Segoe UI Mono']),
.noteentry strong:not([style*='Consolas']):not([style*='Monaco']):not([style*='Courier']):not([style*='monospace']):not([style*='Segoe UI Mono']),
.noteentry i:not([style*='Consolas']):not([style*='Monaco']):not([style*='Courier']):not([style*='monospace']):not([style*='Segoe UI Mono']),
.noteentry em:not([style*='Consolas']):not([style*='Monaco']):not([style*='Courier']):not([style*='monospace']):not([style*='Segoe UI Mono']),
.noteentry u:not([style*='Consolas']):not([style*='Monaco']):not([style*='Courier']):not([style*='monospace']):not([style*='Segoe UI Mono']),
.noteentry s:not([style*='Consolas']):not([style*='Monaco']):not([style*='Courier']):not([style*='monospace']):not([style*='Segoe UI Mono']),
.noteentry a:not([style*='Consolas']):not([style*='Monaco']):not([style*='Courier']):not([style*='monospace']):not([style*='Segoe UI Mono']),
.noteentry span:not(.code-block span):not([style*='Consolas']):not([style*='Monaco']):not([style*='Courier']):not([style*='monospace']):not([style*='Segoe UI Mono']) {
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji' !important;
}

/* Input Styles */
input {
    width: 100%;
    border: 0px;
    text-overflow: ellipsis;
}

input[type="checkbox"],
input[type="radio"] {
    width: auto;
}

/* CSS Title */
.css-title {
    margin-top: 15px;
    margin-bottom: 20px;
    margin-left: -3px;
    font-size: 24px;
    font-weight: 600;
    color: #37352F;
    font-family: 'Inter', sans-serif;
}

.css-title:focus {
    border: none !important;
    outline: none;
    box-shadow: none;
}

/* Horizontal Rule */
hr {
    margin: 0;
    border-top: 1px solid #ccc
}

/* Last Updated Dates */
.lastupdated {
    float: none;
    margin-right: auto;
    margin-left: 0;
    font-size: 14px;
    font-family: 'Inter' !important;
    font-style: italic;
    font-weight: 400;
    margin-top: 7px;
    color: rgb(51, 51, 51) !important;
}

/* Save Button Animation */
.toolbar-btn.save-modified {
    background: transparent !important;
    border: none !important;
 /* animation: pulse-save 2s infinite; */
}

/* Animation de pulsation pour le bouton save modifié */
@keyframes pulse-save {
    0% {
        transform: scale(1);
        box-shadow: 0 0 0 0 rgba(229, 57, 53, 0.4);
    }

    50% {
        transform: scale(1.05);
        box-shadow: 0 0 0 4px rgba(229, 57, 53, 0.2);
    }

    100% {
        transform: scale(1);
        box-shadow: 0 0 0 0 rgba(229, 57, 53, 0.0);
    }
}

/* Animation pulse for update badge */
@keyframes pulse {
    0% {
        transform: scale(1);
    }

    50% {
        transform: scale(1.1);
    }

    100% {
        transform: scale(1);
    }
}

/* Quand save est modifié, changer l'icône et la garder rouge */
.toolbar-btn.save-modified i.fa-save {
    color: #ff0000 !important;
}

.toolbar-btn.save-modified:hover i.fa-save,
.toolbar-btn.save-modified:focus i.fa-save {
    color: #ff0000 !important;
}

/* Pour l'icône save normale, couleur gris foncé par défaut */
.toolbar-btn:not(.save-modified) i.fa-save {
    color: inherit;
}

/* Icon Colors - palette, fill-drip */
.toolbar-btn i.fa-palette,
.toolbar-btn i.fa-fill-drip {
    color: inherit !important;
}

/* Couleurs par défaut des icônes */
.toolbar-btn i.fa-palette {
    color: #ff2222;
}

.toolbar-btn i.fa-fill-drip {
    color: #ffe066;
}

.toolbar-btn:hover i.fa-palette,
.toolbar-btn:focus i.fa-palette {
    color: #ff2222 !important;
}

.toolbar-btn:hover i.fa-fill-drip,
.toolbar-btn:focus i.fa-fill-drip {
    color: #ffe066 !important;
}

@keyframes rotate {
    from {
        transform: rotate(0deg);
    }

    to {
        transform: rotate(360deg);
    }
}

/* Checkbox & Labels for tasks */
/* Styles pour les cases à cocher dans les notes */
.noteentry label {
    user-select: none;
    margin: 0 !important;
    padding: 0 !important;
}

.noteentry label span[contenteditable="true"] {
    outline: none;
    border: none;
    user-select: text;
    cursor: text;
    white-space: nowrap;
    display: inline-block;
    min-width: 20px;
}

.noteentry label span[contenteditable="true"]:focus {
    background-color: transparent;
    border-radius: 0;
}

.noteentry label span[contenteditable="true"]:empty:before {
    content: "Type your task here";
    color: #999;
    font-style: italic;
}
